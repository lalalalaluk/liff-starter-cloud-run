const qr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};qr();var Hr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Vr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function T(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var vn={exports:{}},N=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof N!="undefined"&&N,B={searchParams:"URLSearchParams"in N,iterable:"Symbol"in N&&"iterator"in Symbol,blob:"FileReader"in N&&"Blob"in N&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in N,arrayBuffer:"ArrayBuffer"in N};function zr(e){return e&&DataView.prototype.isPrototypeOf(e)}if(B.arrayBuffer)var Gr=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Kr=ArrayBuffer.isView||function(e){return e&&Gr.indexOf(Object.prototype.toString.call(e))>-1};function Me(e){if(typeof e!="string"&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||e==="")throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function St(e){return typeof e!="string"&&(e=String(e)),e}function Tt(e){var t={next:function(){var n=e.shift();return{done:n===void 0,value:n}}};return B.iterable&&(t[Symbol.iterator]=function(){return t}),t}function L(e){this.map={},e instanceof L?e.forEach(function(t,n){this.append(n,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}L.prototype.append=function(e,t){e=Me(e),t=St(t);var n=this.map[e];this.map[e]=n?n+", "+t:t};L.prototype.delete=function(e){delete this.map[Me(e)]};L.prototype.get=function(e){return e=Me(e),this.has(e)?this.map[e]:null};L.prototype.has=function(e){return this.map.hasOwnProperty(Me(e))};L.prototype.set=function(e,t){this.map[Me(e)]=St(t)};L.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)};L.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),Tt(e)};L.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),Tt(e)};L.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),Tt(e)};B.iterable&&(L.prototype[Symbol.iterator]=L.prototype.entries);function it(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function gn(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function Jr(e){var t=new FileReader,n=gn(t);return t.readAsArrayBuffer(e),n}function Xr(e){var t=new FileReader,n=gn(t);return t.readAsText(e),n}function Qr(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function Gt(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function mn(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?typeof e=="string"?this._bodyText=e:B.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:B.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:B.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():B.arrayBuffer&&B.blob&&zr(e)?(this._bodyArrayBuffer=Gt(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):B.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||Kr(e))?this._bodyArrayBuffer=Gt(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||(typeof e=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):B.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},B.blob&&(this.blob=function(){var e=it(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=it(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(Jr)}),this.text=function(){var e=it(this);if(e)return e;if(this._bodyBlob)return Xr(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Qr(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},B.formData&&(this.formData=function(){return this.text().then(ei)}),this.json=function(){return this.text().then(JSON.parse)},this}var Yr=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Zr(e){var t=e.toUpperCase();return Yr.indexOf(t)>-1?t:e}function ue(e,t){if(!(this instanceof ue))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{};var n=t.body;if(e instanceof ue){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new L(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!n&&e._bodyInit!=null&&(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new L(t.headers)),this.method=Zr(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),(this.method==="GET"||this.method==="HEAD")&&(t.cache==="no-store"||t.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}ue.prototype.clone=function(){return new ue(this,{body:this._bodyInit})};function ei(e){var t=new FormData;return e.trim().split("&").forEach(function(n){if(n){var r=n.split("="),i=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(o))}}),t}function ti(e){var t=new L,n=e.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var i=r.split(":"),o=i.shift().trim();if(o){var s=i.join(":").trim();t.append(o,s)}}),t}mn.call(ue.prototype);function Q(e,t){if(!(this instanceof Q))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=t.status===void 0?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===void 0?"":""+t.statusText,this.headers=new L(t.headers),this.url=t.url||"",this._initBody(e)}mn.call(Q.prototype);Q.prototype.clone=function(){return new Q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new L(this.headers),url:this.url})};Q.error=function(){var e=new Q(null,{status:0,statusText:""});return e.type="error",e};var ni=[301,302,303,307,308];Q.redirect=function(e,t){if(ni.indexOf(t)===-1)throw new RangeError("Invalid status code");return new Q(null,{status:t,headers:{location:e}})};var se=N.DOMException;try{new se}catch{se=function(t,n){this.message=t,this.name=n;var r=Error(t);this.stack=r.stack},se.prototype=Object.create(Error.prototype),se.prototype.constructor=se}function Et(e,t){return new Promise(function(n,r){var i=new ue(e,t);if(i.signal&&i.signal.aborted)return r(new se("Aborted","AbortError"));var o=new XMLHttpRequest;function s(){o.abort()}o.onload=function(){var u={status:o.status,statusText:o.statusText,headers:ti(o.getAllResponseHeaders()||"")};u.url="responseURL"in o?o.responseURL:u.headers.get("X-Request-URL");var c="response"in o?o.response:o.responseText;setTimeout(function(){n(new Q(c,u))},0)},o.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},o.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},o.onabort=function(){setTimeout(function(){r(new se("Aborted","AbortError"))},0)};function a(u){try{return u===""&&N.location.href?N.location.href:u}catch{return u}}o.open(i.method,a(i.url),!0),i.credentials==="include"?o.withCredentials=!0:i.credentials==="omit"&&(o.withCredentials=!1),"responseType"in o&&(B.blob?o.responseType="blob":B.arrayBuffer&&i.headers.get("Content-Type")&&i.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(o.responseType="arraybuffer")),t&&typeof t.headers=="object"&&!(t.headers instanceof L)?Object.getOwnPropertyNames(t.headers).forEach(function(u){o.setRequestHeader(u,St(t.headers[u]))}):i.headers.forEach(function(u,c){o.setRequestHeader(c,u)}),i.signal&&(i.signal.addEventListener("abort",s),o.onreadystatechange=function(){o.readyState===4&&i.signal.removeEventListener("abort",s)}),o.send(typeof i._bodyInit=="undefined"?null:i._bodyInit)})}Et.polyfill=!0;N.fetch||(N.fetch=Et,N.Headers=L,N.Request=ue,N.Response=Q);var ri=Object.freeze(Object.defineProperty({__proto__:null,Headers:L,Request:ue,Response:Q,get DOMException(){return se},fetch:Et},Symbol.toStringTag,{value:"Module"})),ii=T(ri);function bn(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}function wn(e){var t=this;return new t(function(n,r){if(!(e&&typeof e.length!="undefined"))return r(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(i.length===0)return n([]);var o=i.length;function s(u,c){if(c&&(typeof c=="object"||typeof c=="function")){var l=c.then;if(typeof l=="function"){l.call(c,function(d){s(u,d)},function(d){i[u]={status:"rejected",reason:d},--o===0&&n(i)});return}}i[u]={status:"fulfilled",value:c},--o===0&&n(i)}for(var a=0;a<i.length;a++)s(a,i[a])})}var oi=setTimeout;function yn(e){return Boolean(e&&typeof e.length!="undefined")}function si(){}function ai(e,t){return function(){e.apply(t,arguments)}}function x(e){if(!(this instanceof x))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],In(e,this)}function _n(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,x._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?ct:Fe)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(i){Fe(t.promise,i);return}ct(t.promise,r)})}function ct(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var n=t.then;if(t instanceof x){e._state=3,e._value=t,lt(e);return}else if(typeof n=="function"){In(ai(n,t),e);return}}e._state=1,e._value=t,lt(e)}catch(r){Fe(e,r)}}function Fe(e,t){e._state=2,e._value=t,lt(e)}function lt(e){e._state===2&&e._deferreds.length===0&&x._immediateFn(function(){e._handled||x._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)_n(e,e._deferreds[t]);e._deferreds=null}function ui(e,t,n){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=n}function In(e,t){var n=!1;try{e(function(r){n||(n=!0,ct(t,r))},function(r){n||(n=!0,Fe(t,r))})}catch(r){if(n)return;n=!0,Fe(t,r)}}x.prototype.catch=function(e){return this.then(null,e)};x.prototype.then=function(e,t){var n=new this.constructor(si);return _n(this,new ui(e,t,n)),n};x.prototype.finally=bn;x.all=function(e){return new x(function(t,n){if(!yn(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return t([]);var i=r.length;function o(a,u){try{if(u&&(typeof u=="object"||typeof u=="function")){var c=u.then;if(typeof c=="function"){c.call(u,function(l){o(a,l)},n);return}}r[a]=u,--i===0&&t(r)}catch(l){n(l)}}for(var s=0;s<r.length;s++)o(s,r[s])})};x.allSettled=wn;x.resolve=function(e){return e&&typeof e=="object"&&e.constructor===x?e:new x(function(t){t(e)})};x.reject=function(e){return new x(function(t,n){n(e)})};x.race=function(e){return new x(function(t,n){if(!yn(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)x.resolve(e[r]).then(t,n)})};x._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){oi(e,0)};x._unhandledRejectionFn=function(t){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var ye=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")}();typeof ye.Promise!="function"?ye.Promise=x:(ye.Promise.prototype.finally||(ye.Promise.prototype.finally=bn),ye.Promise.allSettled||(ye.Promise.allSettled=wn));var ci=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),li=T(ci),ft=function(e,t){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ft(e,t)};function fi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ft(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var C=function(){return C=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},C.apply(this,arguments)};function h(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})}function p(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function et(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function ae(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}function di(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Ot,hi=new Promise(function(e){Ot=e}),pi=Object.freeze(Object.defineProperty({__proto__:null,get done(){return Ot},ready:hi},Symbol.toStringTag,{value:"Module"})),R="UNKNOWN",q="UNAUTHORIZED",k="INVALID_ARGUMENT",j="INIT_FAILED",J="FORBIDDEN",ne="INVALID_CONFIG",de="INVALID_ID_TOKEN",dt="CREATE_SUBWINDOW_FAILED",ht="EXCEPTION_IN_SUBWINDOW",Sn="liffEvent",Y="LIFF_STORE",Tn="https://liff.line.me/",y={ACCESS_TOKEN:"accessToken",ID_TOKEN:"IDToken",DECODED_ID_TOKEN:"decodedIDToken",FEATURE_TOKEN:"featureToken",LOGIN_TMP:"loginTmp",CONFIG:"config",CONTEXT:"context",EXPIRES:"expires",RAW_CONTEXT:"rawContext",CLIENT_ID:"clientId",IS_SUBSEQUENT_LIFF_APP:"isSubsequentLiffApp",MST_CHALLENGE:"mstChallenge",MSIT:"msit",MST:"mst",MST_VERIFIER:"mstVerifier",APP_DATA:"appData"},Kt="isInClient",En=["context_token","feature_token","access_token","id_token","client_id","mst_verifier","mst_challenge","msit"],vi=5,gi=["liff.ref.source","liff.ref.medium","liff.ref.campaign","liff.ref.term","liff.ref.content"],mi="liff://subwindow",S={INIT:"init",SUBMIT:"submit",CANCEL:"cancel",CLOSE:"close",ERROR:"error"},bi=100,On=100,Cn="liff.subwindow",Xe="healthCheck",wi=["profile","chat_message.write","openid","email"],pe;(function(e){e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR"})(pe||(pe={}));var yi=function(){function e(t){t===void 0&&(t=pe.INFO),this.logLevel=t,this._debug=console.debug,this._info=console.info,this._warn=console.warn,this._error=console.error}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.logLevel<=pe.DEBUG&&(t.unshift("[DEBUG]"),this._debug.apply(this,ae(t)))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.logLevel<=pe.INFO&&(t.unshift("[INFO]"),this._info.apply(this,ae(t)))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.logLevel<=pe.WARN&&(t.unshift("[WARN]"),this._warn.apply(this,ae(t)))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.logLevel<=pe.ERROR&&(t.unshift("[ERROR]"),this._error.apply(this,ae(t)))},e}(),I=new yi(Number("3"));function Jt(e){return window.atob(e.replace(/-/g,"+").replace(/_/g,"/"))}var ot={decode:Jt,encode:function(e){return window.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decodeUnicode:function(e){var t=Jt(e).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join("");return decodeURIComponent(t)}};function te(e,t){if(e===t)return 0;for(var n=e.split("."),r=t.split("."),i=Math.max(n.length,r.length),o=0;o<i;o++){n[o]||(n[o]="0"),r[o]||(r[o]="0");var s=parseInt(n[o])-parseInt(r[o]);if(s!==0)return s>0?1:-1}return 0}function Xt(e){var t=e.replace("#","").match(/.{2}/g)||[];if(t.length!==4)return I.warn("convertArgbToRgba: Received invalid ARGB color"),"";var n=function(r){var i=ve(r);return Math.round(i/255*100)/100}(t[0]);return"rgba("+ve(t[1])+", "+ve(t[2])+", "+ve(t[3])+", "+n+")"}function ve(e){return parseInt(e,16)}function Qt(e){var t=e.replace("#","").match(/.{2}/g)||[];return t.length!==3?(I.warn("convertArgbToRgba: Received invalid hex color"),""):ve(t[0])+", "+ve(t[1])+", "+ve(t[2])}function Yt(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}var Ct={get:function(e){var t=new RegExp("(?:(?:^|.*;\\s*)"+e+"\\s*\\=\\s*([^;]*).*$)|^.*$");return document.cookie.replace(t,"$1")},set:function(e,t,n){var r=e+"="+t;if(n)for(var i in n)r+="; "+i+(n[i]?"="+n[i]:"");I.debug("set cookie",r),document.cookie=r},remove:function(e,t){var n=e+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT";if(t)for(var r in t)n+="; "+r+"="+t[r];document.cookie=n}},_i=new Set(["400","401","403","404","429","500"]),Pn=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i}return fi(t,e),t}(Error);function f(e,t){return new Pn(e,t||"")}function Pt(e){var t=e.match(/([^-]+)-[^-]+/);return t&&t[1]}function Ii(e){var t="";return e.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").forEach(function(n){t+=String.fromCharCode(parseInt(n))}),window.btoa(t)}var Si=new(function(){function e(){this.map={}}return e.prototype.clear=function(){this.map={}},e.prototype.getItem=function(t){var n=this.map[t];return n===void 0?null:n},e.prototype.setItem=function(t,n){this.map[t]=n},e.prototype.removeItem=function(t){delete this.map[t]},e.prototype.key=function(t){var n=Object.keys(this.map)[t];return n===void 0?null:n},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.map).length},enumerable:!1,configurable:!0}),e}()),U={parse:function(e){return e.replace(/^\?/,"").replace(/^#\/?/,"").split(/&+/).filter(function(t){return t.length>0}).reduce(function(t,n){var r=W(n.split("=").map(decodeURIComponent),2),i=r[0],o=r[1],s=t[i];return Array.isArray(s)?s.push(o):Object.prototype.hasOwnProperty.call(t,i)?t[i]=[s,o]:t[i]=o,t},{})},stringify:function(e){return Object.keys(e).map(function(t){var n=e[t],r=function(i){return i!==void 0?encodeURIComponent(t)+"="+encodeURIComponent(i):encodeURIComponent(t)};return Array.isArray(n)?n.map(function(i){return r(i)}).join("&"):r(n)}).join("&")}},Zt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Ti(){return window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967296}function Se(e){for(var t="",n=0;n<e;n++)t+=Zt[Math.floor(Ti()*Zt.length)];return t}function xn(e){var t=new URL(e),n=t.hash.slice(1).split("&").filter(function(r){return!En.some(function(i){return r.includes(i+"=")})}).join("&");return t.hash=n,t.toString()}function Ei(e){var t=new URL(e);return t.toString().replace(new RegExp(String.raw(en||(en=di(["^",""],["^",""])),t.origin)),"")}var en,Oi=function(e){var t=Ei(xn(e));window.history.replaceState(history.state,"",t)};function An(e,t){if(!e)throw new Error("addParamsToUrl: invalid URL");var n=new URL(e);return Object.entries(t).forEach(function(r){var i=W(r,2),o=i[0],s=i[1];n.searchParams.set(o,s)}),n.toString()}function $n(e){var t,n=e.match((t=Tn.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),new RegExp("^"+t+"(\\d+-\\w+)")));return n&&n[1]}function Ci(e){var t=e.match(/^(https?:\/\/.*?)\//);return t&&t[1]||""}function xt(e){return e===void 0&&(e=window.navigator.userAgent),/ipad/.test(e.toLowerCase())}function kn(e){return e===void 0&&(e=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+/.test(e)}function Ln(e){return e===void 0&&(e=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+ LIFF/.test(e)}function Pi(e){return e===void 0&&(e=window.navigator.userAgent),/LIFF\/SubWindow/.test(e)}function xi(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=function(c){Object.keys(c).filter(function(l){return c[l]!==null&&c[l]!==void 0}).forEach(function(l){e[l]=c[l]})};try{for(var s=et(r),a=s.next();!a.done;a=s.next()){var u=a.value;o(u)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return e}var Pe=null;function _(){return Pe===null&&(Pe=Ln()||kn()&&/[#|&]access_token=/.test(location.hash)||sessionStorage.getItem(Y+":"+Kt)==="1",sessionStorage.setItem(Y+":"+Kt,Pe?"1":"0")),!!Pe}function Ai(){Pe=null}var $i=Object.freeze(Object.defineProperty({__proto__:null,_cleanupCachedIsInClient:Ai,isInClient:_},Symbol.toStringTag,{value:"Module"})),jn={};function $(){return jn}function Fn(e){jn=e}function Mn(e,t){if(!t)throw f(ne,"liffId is necessary for liff.init()");var n=(_()?sessionStorage:localStorage).getItem(Y+":"+t+":"+e);try{return n===null?null:JSON.parse(n)}catch{return null}}function D(e){return Mn(e,$().liffId)}function H(e,t){var n=$().liffId;if(!n)throw f(ne,"liffId is necessary for liff.init()");(_()?sessionStorage:localStorage).setItem(Y+":"+n+":"+e,JSON.stringify(t))}function G(){return D(y.CONTEXT)}function tt(e){H(y.CONTEXT,e)}function ki(){return((G()||{}).d||{}).aId}function Li(){return((G()||{}).d||{}).autoplay||!1}function ji(){return(G()||{}).profilePlus}function Nn(){return Boolean(D(y.IS_SUBSEQUENT_LIFF_APP))}function Rn(e){H(y.IS_SUBSEQUENT_LIFF_APP,e)}function Un(){return D(y.APP_DATA)}function Qe(e){H(y.APP_DATA,e)}function Dn(){return D(y.MST_VERIFIER)}function Bn(e){H(y.MST_VERIFIER,e)}function Wn(){return D(y.MSIT)}function qn(e){H(y.MSIT,e)}function Ae(){return D(y.MST)}function Hn(e){H(y.MST,e)}function At(){return D(y.MST_CHALLENGE)}function Vn(e){H(y.MST_CHALLENGE,e)}function zn(){return D(y.CLIENT_ID)}function $t(e){H(y.CLIENT_ID,e)}function Gn(){return D(y.RAW_CONTEXT)}function Ee(){return D(y.FEATURE_TOKEN)}function pt(e){H(y.FEATURE_TOKEN,e)}function kt(){return D(y.ID_TOKEN)}function Lt(e){H(y.ID_TOKEN,e)}function ce(){return D(y.ACCESS_TOKEN)}function nt(e){H(y.ACCESS_TOKEN,e)}function jt(e){var t=$().liffId;if(!t)throw f(ne,"liffId is necessary for liff.init()");(_()?sessionStorage:localStorage).removeItem(Y+":"+t+":"+e)}function Ft(){return D(y.LOGIN_TMP)}function Kn(e){H(y.LOGIN_TMP,e)}function vt(){jt(y.LOGIN_TMP)}function Jn(e){var t=$();Ct.set(Y+":"+y.EXPIRES+":"+t.liffId,e.getTime(),{expires:e.toUTCString(),path:"/",secure:null})}function Xn(){var e=$();return Ct.get(Y+":"+y.EXPIRES+":"+e.liffId)}function Qn(){var e=$();Ct.remove(Y+":"+y.EXPIRES+":"+e.liffId,{path:"/"})}function Mt(){return D(y.DECODED_ID_TOKEN)}function Nt(e){H(y.DECODED_ID_TOKEN,e)}function Yn(){Object.keys(y).forEach(function(e){jt(y[e])}),Qn()}var Fi=Object.freeze(Object.defineProperty({__proto__:null,clean:Yn,get:D,getAId:ki,getAccessToken:ce,getAppData:Un,getByLiffId:Mn,getClientId:zn,getConfig:$,getContext:G,getDecodedIDToken:Mt,getExpireTime:Xn,getFeatureToken:Ee,getIDToken:kt,getIsSubsequentLiffApp:Nn,getIsVideoAutoPlay:Li,getLoginTmp:Ft,getMSIT:Wn,getMST:Ae,getMSTChallenge:At,getMSTVerifier:Dn,getProfilePlus:ji,getRawContext:Gn,remove:jt,removeExpireTime:Qn,removeLoginTmp:vt,set:H,setAccessToken:nt,setAppData:Qe,setClientId:$t,setConfig:Fn,setContext:tt,setDecodedIDToken:Nt,setExpireTime:Jn,setFeatureToken:pt,setIDToken:Lt,setIsSubsequentLiffApp:Rn,setLoginTmp:Kn,setMSIT:qn,setMST:Hn,setMSTChallenge:Vn,setMSTVerifier:Bn},Symbol.toStringTag,{value:"Module"}));function z(){return!!ce()}var Mi=Object.freeze(Object.defineProperty({__proto__:null,isLoggedIn:z},Symbol.toStringTag,{value:"Module"})),ze;function X(){if(!ze){var e=window.navigator.userAgent.toLowerCase();ze=/iphone|ipad|ipod/.test(e)?"ios":/android/.test(e)?"android":"web"}return ze}function Ni(){ze=void 0}var Ri=Object.freeze(Object.defineProperty({__proto__:null,_cleanupCachedOS:Ni,getOS:X},Symbol.toStringTag,{value:"Module"}));function re(){var e=navigator.userAgent.match(/Line\/\d+(\.\d+)*/i);return e?e[0].slice(5):null}var Ui=Object.freeze(Object.defineProperty({__proto__:null,getLineVersion:re},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Di(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(c){try{u(r.next(c))}catch(l){o(l)}}function a(c){try{u(r.throw(c))}catch(l){o(l)}}function u(c){var l;c.done?i(c.value):(l=c.value,l instanceof n?l:new n(function(d){d(l)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function Bi(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||l[0]!==6&&l[0]!==2)){s=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){s.label=l[1];break}if(l[0]===6&&s.label<i[1]){s.label=i[1],i=l;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(l);break}i[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(d){l=[6,d],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,c])}}}function Wi(){var e;return X()==="ios"?(e=re())&&te(e,"9.19.0")<0?"https://static.line-scdn.net/liff/edge/2/ios-918-extensions.js":"https://static.line-scdn.net/liff/edge/2/ios-extensions.js":"https://static.line-scdn.net/liff/edge/2/non-ios-extensions.js"}function qi(){return function(){return Di(this,void 0,void 0,function(){return Bi(this,function(e){switch(e.label){case 0:return[3,2];case 1:return[2,e.sent().default];case 2:return[2,new Promise(function(t,n){var r=document.createElement("script"),i=Wi();r.onload=function(){var o=window.liffClientExtension;o?t(o):n(f(j,"Unable to load client features. (Extension is empty)"))},r.onerror=function(){n(f(j,"Unable to load client features."))},r.src=i,r.type="text/javascript",document.body.appendChild(r)})]}})})}()}function Zn(){Yn()}var Hi=Object.freeze(Object.defineProperty({__proto__:null,logout:Zn},Symbol.toStringTag,{value:"Module"})),Vi=function(){function e(){}return e.prototype.invoke=function(){return Pi()},e}(),zi=function(){function e(t){this.storage=t}return Object.defineProperty(e,"IN_SUB_WINDOW_KEY",{get:function(){return"inSubWindow"},enumerable:!1,configurable:!0}),e.prototype.invoke=function(){return!(!this.getInSubWindow()&&!this.getSubWindowIdentifier())||!!new URLSearchParams(window.location.search).has(Cn)&&(this.setInSubWindow(!0),!0)},e.prototype.getInSubWindow=function(){var t=this.storage.getItem(Y+":"+this.getLiffId()+":"+e.IN_SUB_WINDOW_KEY);return t!==null&&JSON.parse(t)},e.prototype.getSubWindowIdentifier=function(){var t,n,r="liff.subwindow.identifier",i=new URLSearchParams(window.location.search);return i.get(r)||(t=r,(n=i.get("liff.state"))?new URLSearchParams(n).get(t):null)||null},e.prototype.setInSubWindow=function(t){this.storage.setItem(Y+":"+this.getLiffId()+":"+e.IN_SUB_WINDOW_KEY,String(t))},e.prototype.getLiffId=function(){var t=$().liffId;if(!t)throw f(ne,"liffId is necessary for liff.init()");return t},e}(),er=function(){function e(){_()?this.impl=new Vi:this.impl=new zi(window.sessionStorage)}return Object.defineProperty(e.prototype,"name",{get:function(){return"isSubWindow"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this.impl.invoke.bind(this.impl)},e}(),tr=new er,be=tr.install(),Gi=Object.freeze(Object.defineProperty({__proto__:null,IsSubWindowModule:er,isSubWindow:be,module:tr},Symbol.toStringTag,{value:"Module"})),Ki=["subwindowOpen","shareTargetPicker","multipleLiffTransition","scanCode","scanCodeV2","getAdvertisingId","addToHomeScreen","bluetoothLeFunction","skipChannelVerificationScreen"];function xe(e){var t,n=G();return(t=n==null?void 0:n.availability)===null||t===void 0?void 0:t[e]}function gt(e,t){var n=re();return!!n&&!(t&&te(n,t)>0)&&te(n,e)>=0}function Oe(e){var t=xe(e);if(!t)return!1;var n=t.permission,r=t.minVer,i=t.unsupportedFromVer;return!!n&&!!_()&&gt(r,i)}var Ji={shareTargetPicker:function(){if(!z())return!1;var e=xe("shareTargetPicker");if(!e)return!1;var t=e.permission,n=e.minVer;if(!t)return!1;if(_()){var r=re();return r!==null&&te(r,n)>=0}return!0},multipleLiffTransition:function(){var e=xe("multipleLiffTransition");if(!e)return!1;var t=e.permission;return _()&&t},subwindowOpen:function(){var e=xe("subwindowOpen");return!(!e||!e.permission)&&(!_()||gt(e.minVer,e.unsupportedFromVer))},scanCode:function(){return Oe("scanCode")},scanCodeV2:function(){if(!z())return!1;var e=xe("scanCodeV2");return!(!e||!e.permission)&&(!_()||gt(e.minVer))},getAdvertisingId:function(){return Oe("getAdvertisingId")},addToHomeScreen:function(){return Oe("addToHomeScreen")},bluetoothLeFunction:function(){return Oe("bluetoothLeFunction")},skipChannelVerificationScreen:function(){return Oe("skipChannelVerificationScreen")}};function ge(e){if(!Ki.includes(e))throw f(k,"Unexpected API name.");var t=Ji[e];return!t||t()}var Xi=Object.freeze(Object.defineProperty({__proto__:null,isApiAvailable:ge},Symbol.toStringTag,{value:"Module"}));function Qi(e){return h(this,void 0,void 0,function(){var t,n,r;return p(this,function(i){switch(i.label){case 0:if(!e.ok)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.json()];case 2:return[2,i.sent()];case 3:return i.sent(),[2,e];case 4:return t=String(e.status),n=_i.has(t)?t:R,[4,e.json().catch(function(){throw f(n,e.statusText)})];case 5:throw r=i.sent(),f(r.error||n,r.error_description||r.message)}})})}function nr(e){var t=function(n){if(n)return n;var r=ce();if(!r)throw f(q,"Need access_token for api call, Please login first");return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+r}}(e&&e.headers);return C(C({},e),{headers:t})}function F(e,t){var n;try{n=nr(t)}catch(r){return Promise.reject(r)}return fetch(e,n).then(Qi)}function Yi(e,t){var n;try{n=nr(t)}catch(r){return Promise.reject(r)}return fetch(e,n)}function A(e){var t=e.subdomain;return"https://"+(t===void 0?"api":t)+".line.me/"+e.pathname}var Zi={token:A({pathname:"oauth2/v2.1/token"}),certs:A({pathname:"oauth2/v2.1/certs"}),"openid-configuration":A({subdomain:"access",pathname:".well-known/openid-configuration"}),authorize:A({subdomain:"access",pathname:"liff/v1/authorize"}),profile:A({pathname:"v2/profile"}),message:A({pathname:"message/v3/share"}),messageOTT:A({pathname:"message/v3/multisend?type=ott"}),friendship:A({pathname:"friendship/v1/status"}),shareTargetPicker:A({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker"}),shareTargetPickerOtt:A({pathname:"liff/v2/apps"}),shareTargetPickerResult:A({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker/result"}),apps:A({pathname:"liff/v2/apps"}),subWindowGetMSIT:A({pathname:"liff/v2/sub/msit"}),subWindowGetMSTByMSIT:A({pathname:"liff/v2/sub/mst"}),subWindowSubscribe:A({subdomain:"liff",pathname:"liff/v2/sub/waitResult"}),subWindowPost:A({pathname:"liff/v2/sub/result"}),subWindowGetAppData:A({pathname:"liff/v2/sub/appData"}),subWindowGetOrigin:function(e){return A({pathname:"liff/v2/sub/"+e+"/origin"})},accessTokenVerify:A({pathname:"oauth2/v2.1/verify"}),unauthorizedPermissions:A({subdomain:"liff",pathname:"liff/v2/incrementalAgreement/unauthorizedPermissions"}),permanentLink:A({subdomain:"liff",pathname:"liff/v2/permanentLink"})};function P(e){return Zi[e]}function rr(e){return F(P("accessTokenVerify")+"?access_token="+encodeURIComponent(e),{headers:{"Content-Type":"application/json",Accept:"application/json"}})}var ir="liff.subwindow.identifier",mt="liff.subwindow.cryptokey",Ge=C(C({},S),{GET_DATA:"getData",SET_DATA:"setData",NOT_FOUND:"notFound",TEARDOWN:"teardown"}),Ye={BROADCAST:"broadcast",COMMAND:"command"},$e={MAIN:"main",SUB:"sub"},or=function(e){return h(void 0,void 0,void 0,function(){var t;return p(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,window.crypto.subtle.importKey("jwk",{kty:"oct",k:e,alg:"A128GCM",ext:!0},{name:"AES-GCM"},!1,["encrypt","decrypt"])];case 1:return[2,n.sent()];case 2:throw t=n.sent(),f(R,t);case 3:return[2]}})})},eo=function(e,t,n){return h(void 0,void 0,void 0,function(){var r,i,o,s;return p(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),r=new TextEncoder().encode(e),[4,or(t)];case 1:return i=a.sent(),[4,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},i,new TextEncoder().encode(n))];case 2:return o=a.sent(),[2,btoa(new Uint8Array(o).reduce(function(u,c){return u+String.fromCharCode(c)},""))];case 3:throw s=a.sent(),f(R,s);case 4:return[2]}})})},to=function(e,t,n){return h(void 0,void 0,void 0,function(){var r,i,o,s,a,u,c;return p(this,function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),r=new TextEncoder().encode(e),[4,or(t)];case 1:for(i=l.sent(),o=atob(n),s=new Uint8Array(o.length),a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return[4,window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},i,s.buffer)];case 2:return u=l.sent(),[2,new TextDecoder().decode(new Uint8Array(u))];case 3:throw c=l.sent(),f(R,c);case 4:return[2]}})})},no=function(e,t){return ke(e)===ke(t)},ke=function(e){return e.identifier+"-"+e.action+"-"+e.timestamp},ro=function(e){return Object.keys(S).map(function(t){return S[t]}).includes(e)?Ye.BROADCAST:Ye.COMMAND};function io(){var e=document.createElement("form");e.method="POST",e.action="$MESSAGE_HANDLER_URL";var t=document.createElement("input");t.type="hidden",t.name="identifier",t.value="$IDENTIFIER",e.appendChild(t),document.body.appendChild(e),e.submit()}var oo=function(e){var t=this;e===void 0&&(e=$e.MAIN),this.identification={identifier:"",cryptoKey:""},this.messageHandlerInstance=null,this.listeners=new Map,this.sentMessages=[],this.generateIdentification=function(){return h(t,void 0,void 0,function(){var n,r,i,o,s;return p(this,function(a){switch(a.label){case 0:return n=new URLSearchParams(window.location.search),r=function(u){var c=n.get("liff.state");return c?new URLSearchParams(c).get(u):null},i=this,s={identifier:this.windowType===$e.MAIN?Se(12):n.get("liff.subwindow.identifier")||r("liff.subwindow.identifier")||""},this.windowType!==$e.MAIN?[3,2]:[4,h(void 0,void 0,void 0,function(){var u,c,l;return p(this,function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),[4,window.crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])];case 1:return u=d.sent(),[4,window.crypto.subtle.exportKey("jwk",u)];case 2:if(!(c=d.sent())||!c.k)throw f(R,"failed to generate key");return[2,c.k];case 3:throw l=d.sent(),f(R,l);case 4:return[2]}})})];case 1:return o=a.sent(),[3,3];case 2:o=n.get(mt)||r(mt)||"",a.label=3;case 3:return i.identification=(s.cryptoKey=o,s),[2]}})})},this.hasIdentification=function(){var n=t.identification,r=n.identifier,i=n.cryptoKey;return typeof r=="string"&&typeof i=="string"&&r.length>0&&i.length>0},this.isReady=function(){return t.hasIdentification()&&!!t.messageHandlerInstance},this.setup=function(){return h(t,void 0,void 0,function(){var n,r,i,o,s,a=this;return p(this,function(u){switch(u.label){case 0:return this.messageHandlerInstance?[2]:[4,this.generateIdentification()];case 1:if(u.sent(),!(n=this.identification.identifier))return[2];if(r=/^[a-zA-Z0-9]+$/gm,!n.match(r))throw f(R,"Invalid identifier");return(i=document.createElement("iframe")).style.display="none",i.src="about:blank",document.body.appendChild(i),(s=i==null?void 0:i.contentWindow)===null||s===void 0||s.window.eval("("+io.toString().replace("$MESSAGE_HANDLER_URL","https://liff-subwindow.line.me/liff/v2/sub/messageHandler").replace("$IDENTIFIER",n.split("'")[0])+")()"),o="iframe-"+n+"-ready",[4,new Promise(function(c){var l=function(d){d.data[o]&&(a.messageHandlerInstance=i,window.addEventListener("message",a.proxyToListeners),c(),document.removeEventListener("message",l))};window.addEventListener("message",l)})];case 2:return[2,u.sent()]}})})},this.teardown=function(){return h(t,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return this.isReady()?[4,this.send({eventName:Ge.TEARDOWN})]:[3,2];case 1:i.sent(),window.removeEventListener("message",this.proxyToListeners),this.listeners.clear(),(r=(n=this.messageHandlerInstance)===null||n===void 0?void 0:n.parentNode)===null||r===void 0||r.removeChild(this.messageHandlerInstance),this.messageHandlerInstance=null,i.label=2;case 2:return[2]}})})},this.listen=function(n){t.listeners.set(n,n)},this.listenRepliedEvent=function(n,r){var i=function(o){o.replyTarget&&no(o.replyTarget,n)&&(r(o),t.listeners.delete(i))};t.listeners.set(i,i)},this.send=function(n){return h(t,void 0,void 0,function(){var r,i,o,s,a=this;return p(this,function(u){switch(u.label){case 0:if(!this.isReady())throw f("message bus is not ready to send message");return i={action:ro(n.eventName),identifier:this.identification.identifier||"",timestamp:new Date().getTime()},[4,this.getEncryptedContext(n)];case 1:return i.context=u.sent(),r=i,(s=(o=this.messageHandlerInstance)===null||o===void 0?void 0:o.contentWindow)===null||s===void 0||s.postMessage({messageBusEvent:r},"*"),this.sentMessages.push(ke(r)),[4,new Promise(function(c){a.listenRepliedEvent(r,function(l){c(l.context)})})];case 2:return[2,u.sent()]}})})},this.reply=function(n,r){return h(t,void 0,void 0,function(){var i,o,s,a;return p(this,function(u){switch(u.label){case 0:if(!this.isReady())throw f("message bus is not ready to send message");if(!n.identifier||!n.timestamp)throw f(R,"target message is not valid");return o={action:Ye.BROADCAST},[4,this.getEncryptedContext(r)];case 1:return o.context=u.sent(),o.identifier=this.identification.identifier||"",o.timestamp=new Date().getTime(),o.replyTarget={action:n.action,identifier:n.identifier,timestamp:n.timestamp},i=o,(a=(s=this.messageHandlerInstance)===null||s===void 0?void 0:s.contentWindow)===null||a===void 0||a.postMessage({messageBusEvent:i},"*"),this.sentMessages.push(ke(i)),[2]}})})},this.setData=function(n,r){n===void 0&&(n="appData"),t.send({eventName:Ge.SET_DATA,key:n,data:r})},this.getData=function(n){return n===void 0&&(n="appData"),h(t,void 0,void 0,function(){return p(this,function(r){switch(r.label){case 0:return[4,this.send({eventName:Ge.GET_DATA,key:n})];case 1:return[2,r.sent()]}})})},this.proxyToListeners=function(n){return h(t,void 0,void 0,function(){var r,i=this;return p(this,function(o){return(r=n.data.messageBusEvent)?(this.sentMessages.includes(ke(r))||r.identifier!==this.identification.identifier||r.action!==Ye.BROADCAST&&!r.replyTarget||this.listeners.forEach(function(s){return h(i,void 0,void 0,function(){var a,u,c;return p(this,function(l){switch(l.label){case 0:return a=s,u=[C({},r)],c={},[4,this.getDecryptedContext(r.context)];case 1:return a.apply(void 0,[C.apply(void 0,u.concat([(c.context=l.sent(),c)]))]),[2]}})})}),[2]):[2]})})},this.getEncryptedContext=function(n){return h(t,void 0,void 0,function(){var r,i,o,s,a,u,c;return p(this,function(l){switch(l.label){case 0:return r=this.identification,i=r.identifier,o=r.cryptoKey,a=(s=JSON).stringify,c={eventName:n.eventName,key:n.key?n.key:void 0},n.data?[4,eo(i,o,JSON.stringify(n.data))]:[3,2];case 1:return u=l.sent(),[3,3];case 2:u=void 0,l.label=3;case 3:return[2,a.apply(s,[(c.data=u,c)])]}})})},this.getDecryptedContext=function(n){return h(t,void 0,void 0,function(){var r,i,o,s,a,u,c,l;return p(this,function(d){switch(d.label){case 0:return r=this.identification,i=r.identifier,o=r.cryptoKey,(s=JSON.parse(n)).data&&typeof s.data=="string"?(l=(c=JSON).parse,[4,to(i,o,s.data)]):[3,2];case 1:return u=l.apply(c,[d.sent()]),[3,3];case 2:u=void 0,d.label=3;case 3:return a=u,[2,C(C({},s),{data:a})]}})})},this.windowType=e};function sr(e){return new CustomEvent(Sn,{detail:e})}(function(){if(typeof window.CustomEvent!="function"){let t=function(n,r){var i=r||{},o=i.bubbles,s=o!==void 0&&o,a=i.cancelable,u=a!==void 0&&a,c=i.detail,l=c===void 0?void 0:c,d=document.createEvent("CustomEvent");return d.initCustomEvent(n,s,u,l),d};var e=t;t.prototype=Event.prototype,window.CustomEvent=t}})();var _e={},tn=!1;function Rt(e,t){tn||(tn=!0,window.addEventListener(Sn,function(n){n&&n.detail&&n.detail.type&&_e[n.detail.type]&&_e[n.detail.type].forEach(function(r){return r(n)})})),_e[e]?_e[e].push(t):_e[e]=[t]}function Ut(e,t){var n=_e[e];if(n&&Array.isArray(n)){var r=n.indexOf(t);r>=0&&n.splice(r,1)}}function so(e){var t={};try{t=JSON.parse(e)}catch(r){throw f(k,r.message)}var n=sr(t);I.debug("[client dispatchEvent to js]",{type:n.type,detail:n.detail}),window.dispatchEvent(n)}function ar(e,t,n){t===void 0&&(t={}),n===void 0&&(n="");var r=Ee();if(!r)throw f(J,"Invalid featureToken for client features");if(!window._liff||!window._liff.postMessage)throw f(k,"postMessage is not available from client");I.debug("[js postMessage to client]",e,n,t),window._liff.postMessage(e,r,n,JSON.stringify(t))}function Dt(e,t,n){return t===void 0&&(t={}),n===void 0&&(n={once:!0}),Ee()?(n=C({callbackId:Se(12),once:!0},n),new Promise(function(r,i){var o=function(s){if(s&&s.detail){var a=s.detail.callbackId===n.callbackId,u=typeof s.detail.callbackId!="string";(a||u)&&(n.once&&Ut(e,o),I.debug("[callback detail]",s.detail),s.detail.error?i(s.detail.error):s.detail.data?r(s.detail.data):i(s.detail))}i()};Rt(e,o),ar(e,t,n.callbackId)})):Promise.reject(f(J,"Invalid featureToken for client features"))}var ao=Object.freeze(Object.defineProperty({__proto__:null,addListener:Rt,call:Dt,createEvent:sr,dispatch:so,postMessage:ar,removeListener:Ut},Symbol.toStringTag,{value:"Module"}));function Le(){var e=re();e!==null&&(X()==="ios"&&te(e,"9.19")>=0||X()==="android"&&te(e,"11.6.0")>=0)?location.href="liff://close":window._liff&&window._liff.postMessage?e!==null&&te(e,"10.15.0")>=0?X()==="ios"?window._liff.postMessage("closeWindow",""):window._liff.postMessage("closeWindow","","",""):Dt("closeWindow"):window.close()}var uo=Object.freeze(Object.defineProperty({__proto__:null,closeWindow:Le},Symbol.toStringTag,{value:"Module"}));function ur(e){var t=P("subWindowGetOrigin");return F(t(e))}var oe={};function Te(e,t){e&&oe[e]&&oe[e].forEach(function(n){n(t)})}var cr,lr,fr,dr,bt,hr=function(){function e(t){this.storage=t}return e.prototype.getItem=function(t){return this.storage.getItem(this.getKeyPrefix()+":"+t)},e.prototype.setItem=function(t,n){this.storage.setItem(this.getKeyPrefix()+":"+t,n)},e.prototype.removeItem=function(t){this.storage.removeItem(this.getKeyPrefix()+":"+t)},e.prototype.clear=function(){this.storage.clear()},e.prototype.getKeyPrefix=function(){return Y+":"+this.getLiffId()},e.prototype.getLiffId=function(){var t=$().liffId;if(!t)throw f(ne,"liffId is necessary for liff.init()");return t},e}(),pr=new hr(Si);function Ze(){var e=pr.getItem("subWindowStatusUpdated");return e!==null&&JSON.parse(e)}function me(e){pr.setItem("subWindowStatusUpdated",String(e))}function wt(e){cr=e}function je(){return cr}function yt(){return fr}function nn(){return dr}function Bt(e){return e===void 0&&(e=$e.MAIN),h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,(bt=new oo(e)).setup()];case 1:return t.sent(),[2,bt]}})})}function we(){return bt}var vr=new hr(window.sessionStorage);function gr(e){vr.setItem("mainWindowOrigin",e)}function Wt(){return vr.getItem("mainWindowOrigin")}function rn(e,t){return t===void 0&&(t={}),h(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return p(this,function(l){switch(l.label){case 0:if((n=we())!=null&&n.isReady())return[3,5];if(r=JSON.stringify(t),i=$().liffId,o=Wt(),!window.opener||!o||!i)throw f(ht);s=!1,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,ur(i)];case 2:return a=l.sent(),s=a.subwindowCommonModule,[3,4];case 3:throw u=l.sent(),I.debug(u),f(ht);case 4:return c=s?o:location.origin,[2,new Promise(function(d){window.addEventListener("message",function g(v){(function(m){return!!(m.data&&typeof m.data.type=="string"&&[S.SUBMIT,S.CANCEL].includes(m.data.type))})(v)&&(window.removeEventListener("message",g),d({status:e,result:r}))}),window.opener.postMessage({status:e,result:r},c)})];case 5:return n.send({eventName:e,data:t}),[4,new Promise(function(d){setTimeout(d,500)})];case 6:return l.sent(),[2,{status:e,result:JSON.stringify(t)}]}})})}function qt(e){var t,n=nn();if(e.origin===n){var r=e.data;if(r){var i,o=r.status,s=r.result;try{i=JSON.parse(s||"{}")}catch{i={}}switch(o){case Xe:window.clearInterval(yt()),Ht();break;case S.CANCEL:case S.SUBMIT:me(!0),window.clearInterval(yt()),window.removeEventListener("message",qt),Te(o,i),(t=je())===null||t===void 0||t.postMessage({type:o},nn());break;default:I.debug("unexpected message")}}}}var co=function(e){return h(void 0,void 0,void 0,function(){var t,n,r,i;return p(this,function(o){if(Ze())return[2];switch(t=e.context,n=t.eventName,r=t.data,i=we(),n){case S.INIT:br(!r.hasOpener);break;case S.CANCEL:case S.SUBMIT:me(!0),Te(n,r),i==null||i.reply(e,{eventName:n});break;case S.CLOSE:Ze()===!1&&(me(!0),Te(S.CLOSE,{})),Ht()}return[2]})})};function mr(){window.clearInterval(lr),window.clearInterval(yt()),window.removeEventListener("message",qt)}function br(e){if(e===void 0&&(e=!1),mr(),me(!1),e){var t=je();t&&(t.close(),wt(null))}}function Ht(){return h(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return(e=we())?[4,e.teardown()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}function lo(e){return h(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l;return p(this,function(d){switch(d.label){case 0:return(t=$n(e.url))?(br(!0),[4,Ht()]):[2,Promise.reject(f(k,"params.url must be liff url"))];case 1:return d.sent(),n=e.url,r=e.appData,(i=new URL(n)).searchParams.append(Cn,"true"),[4,Bt()];case 2:return o=d.sent(),i.searchParams.append(ir,o.identification.identifier),i.searchParams.append(mt,o.identification.cryptoKey),i.hostname=function(v){var m=W(v.split(".")),w=m[0],b=m.slice(1);return ae([w+"-ext"],b).join(".")}(i.hostname),s=i.toString(),wt(X()!=="ios"||xt()?window.open("","liffsubwindow","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):window.open()),[4,ur(t)];case 3:if(a=d.sent(),u=a.origin,c=a.subwindowCommonModule,!(l=je()))throw f(dt);return c?(function(v){dr=v}(u),o.listen(co),o.setData("appData",r),window.addEventListener("message",qt),l.location.href=s,g=function(v,m){var w=je(),b={type:Xe};return m&&(b.message=JSON.stringify(m)),window.setInterval(function(){w==null||w.postMessage(b,v)},On)}(u,r),fr=g,function(v){lr=v}(window.setInterval(function(){var v=je();v&&v.closed&&(mr(),wt(null),Ze()===!1&&(me(!0),Te(S.CLOSE,{})))},bi)),[2]):(l.close(),[2])}var g})})}function Ke(e){return h(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,d;return p(this,function(g){switch(g.label){case 0:t=e.msit,n=e.mstChallenge,r=e.onSuccess,i=e.onError,o=e.reconnectCount,s=o===void 0?0:o,g.label=1;case 1:return g.trys.push([1,3,,6]),[4,Yi(P("subWindowSubscribe"),{method:"POST",body:JSON.stringify({msit:t,mstChallenge:n})})];case 2:return a=g.sent(),[3,6];case 3:return g.sent(),[4,on()];case 4:return g.sent(),[4,st(Ke,{msit:t,mstChallenge:n,onSuccess:r,onError:i,reconnectCount:s+=1})];case 5:return g.sent(),[2];case 6:return a.status>=500?[4,on()]:[3,9];case 7:return g.sent(),[4,st(Ke,{msit:t,mstChallenge:n,onSuccess:r,onError:i,reconnectCount:s+=1})];case 8:return g.sent(),[3,20];case 9:return a.status>=400&&500>a.status?[4,sn(a)]:[3,11];case 10:return(c=g.sent())?(u=c.errorDetail,i(f(k,u))):i(f(R,"Some error happened in the server")),[3,20];case 11:return a.status!==200?[3,19]:[4,sn(a)];case 12:return(c=g.sent())?[3,13]:(i(f(R,"Some error happened in the server")),[3,18]);case 13:switch(l=c.status,d=c.result,l){case S.ERROR:return[3,14];case S.CLOSE:case S.CANCEL:case S.SUBMIT:return[3,16]}return[3,17];case 14:return[4,st(Ke,{msit:t,mstChallenge:n,onSuccess:r,onError:i,reconnectCount:s})];case 15:return g.sent(),[3,18];case 16:return r(l,d),[3,18];case 17:i(f(R,"Some error happened in the server")),g.label=18;case 18:return[3,20];case 19:i(f(R,"Some error happened in the server")),g.label=20;case 20:return[2]}})})}function on(){return new Promise(function(e){return setTimeout(e,1e3)})}function sn(e){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e.json()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,null];case 3:return[2]}})})}function st(e,t){return h(this,void 0,void 0,function(){return p(this,function(n){switch(n.label){case 0:return t.reconnectCount>=10?(t.onError(f(R,"Failed to connect")),[3,3]):[3,1];case 1:return[4,e(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function fo(e){var t={};return Object.keys(e).forEach(function(n){n==="closeButtonColor"?e[n]==="white"?t[n]="#ffffff":t[n]="#000000":t[n]=e[n]}),t}var ho={height:"full",closeButtonPosition:"right",closeButtonColor:"black",closeButtonLabel:""};function po(e){var t=e.appData,n=e.native,r=$().liffId,i=At(),o=$n(e.url);if(!r)return Promise.reject(f(q,"liffId is invalid"));if(!i)return Promise.reject(f(q,"mst_challenge is invalid"));if(!o)return Promise.reject(f(k,"params.url must be liff url"));var s=Object.assign({},ho,n);return function(a){var u=a.mainLiffId,c=a.subLiffId,l=a.mstChallenge,d=a.appData,g=a.view;return u&&l?F(P("subWindowGetMSIT"),{method:"POST",body:JSON.stringify({mainLiffId:u,subLiffId:c,mstChallenge:l,appData:d,view:g})}):Promise.reject(f(k,"no proper argument"))}({mainLiffId:r,subLiffId:o,mstChallenge:i,appData:t,view:fo(s)}).then(function(a){var u=a.msit;Ke({msit:u,mstChallenge:i,onSuccess:function(c,l){Te(c,l)},onError:function(c){Te(S.ERROR,c)}}),function(c,l){var d=c.url,g=new URLSearchParams;g.set("msit",l),location.href=mi+"?url="+encodeURIComponent(d)+"&"+g.toString()}(e,u)})}function qe(){if(!be())throw f(q,"this api can be only called in child window")}function at(e){if(!e.mst||!e.status)return Promise.reject(f(k,"no proper argument"));var t=JSON.stringify(e);return F(P("subWindowPost"),{method:"POST",body:t})}function wr(e){var t=e.msit,n=e.mstVerifier;return t&&n?F(P("subWindowGetMSTByMSIT"),{method:"POST",body:JSON.stringify({msit:t,mstVerifier:n})}):Promise.reject(f(k,"no proper argument"))}function yr(e){var t=e.mst;return t?F(P("subWindowGetAppData"),{method:"POST",body:JSON.stringify({mst:t})}):Promise.reject(f(k,"no proper argument"))}var V={on:function(e,t){oe[e]||(oe[e]=[]),oe[e].push(t)},off:function(e,t){if(oe[e]){var n=oe[e].indexOf(t);n>=0&&oe[e].splice(n,1)}},open:function(e){if(!ge("subwindowOpen"))throw f(J,"No permission for liff.subWindow.open()");if(!Ln()&&kn())throw f(J,"Subwindow is not supported in this browser");return function(){if(be())throw f(q,"this api can be only called in parent window")}(),_()?po(e):lo(e)},cancel:function(e){return e===void 0&&(e={}),qe(),_()?function(t){return t===void 0&&(t={}),h(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return(n=Ae())?[4,at({mst:n,status:S.CANCEL,result:t})]:[2,Promise.reject(f(q,"mst is invalid"))];case 1:return r=i.sent(),me(!0),[2,r]}})})}(e):function(t){return t===void 0&&(t={}),rn(S.CANCEL,t)}(e)},submit:function(e){return e===void 0&&(e={}),qe(),_()?function(t){return t===void 0&&(t={}),h(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return(n=Ae())?[4,at({mst:n,status:S.SUBMIT,result:t})]:[2,Promise.reject(f(q,"mst is invalid"))];case 1:return r=i.sent(),me(!0),[2,r]}})})}(e):function(t){return t===void 0&&(t={}),rn(S.SUBMIT,t)}(e)},close:function(){return qe(),_()?function(){return h(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return Ze()!==!1?[3,2]:(e=Ae())?[4,at({mst:e,status:S.CLOSE,result:{}})]:[2,Promise.reject(f(q,"mst is invalid"))];case 1:t.sent(),t.label=2;case 2:return Le(),[2]}})})}():function(){return h(this,void 0,void 0,function(){var e;return p(this,function(t){return(e=we())!=null&&e.isReady()?(e.send({eventName:S.CLOSE}),[2,new Promise(function(n){setTimeout(function(){Le(),n()},On)})]):(Le(),[2,Promise.resolve()])})})}()},getAppData:function(){return qe(),function(){var e,t=Un();try{e=t?JSON.parse(t):{}}catch{e={}}return Promise.resolve(e)}()}},vo=Object.freeze(Object.defineProperty({__proto__:null,getAppData:yr,getMSTByMSIT:wr,getMainWindowOrigin:Wt,getMessageBus:we,initMessageBus:Bt,setMainWindowOrigin:gr,subWindow:V},Symbol.toStringTag,{value:"Module"})),go=function(){var e=this;this.type="sync",this.fns=new Set,this.on=function(t){e.fns.add(t)},this.call=function(){for(var t,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{for(var o=et(e.fns),s=o.next();!s.done;s=o.next()){var a=s.value;a.apply(void 0,ae(r))}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}},Ce=function(){var e=this;this.type="async",this.fns=new Set,this.on=function(t){e.fns.add(t)},this.call=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return h(e,void 0,void 0,function(){var r,i,o,s,a,u;return p(this,function(c){switch(c.label){case 0:r=[];try{for(i=et(this.fns),o=i.next();!o.done;o=i.next())s=o.value,r.push(s.apply(void 0,ae(t)))}catch(l){a={error:l}}finally{try{o&&!o.done&&(u=i.return)&&u.call(i)}finally{if(a)throw a.error}}return[4,Promise.all(r)];case 1:return c.sent(),[2]}})})}},an={iconColor:"#111111",statusBarColor:"BLACK",titleTextColor:"#111111",titleSubtextColor:"#B7B7B7",titleButtonColor:"#111111",titleBackgroundColor:"#FFFFFF",progressBarColor:"#06C755",progressBackgroundColor:"#FFFFFF",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#FFFFFF",baseTextColor:"#000000",lightButtonBorderColor:"rgba(0, 0, 0, 0.15)"},un={iconColor:"#FFFFFF",statusBarColor:"WHITE",titleTextColor:"#FFFFFF",titleSubtextColor:"#949494",titleButtonColor:"#FFFFFF",titleBackgroundColor:"#111111",progressBarColor:"#06C755",progressBackgroundColor:"#111111",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#000000",baseTextColor:"#FFFFFF",lightButtonBorderColor:"rgba(255, 255, 255, 0.5)"};function mo(){var e;M("color-scheme",(((e=G())==null?void 0:e.menuColorSetting)||{adaptableColorSchemes:["light"]}).adaptableColorSchemes.join(" "));var t=window.matchMedia("(prefers-color-scheme: dark)");ut({matches:t==null?void 0:t.matches,media:t==null?void 0:t.media}),t.addEventListener?t.addEventListener("change",ut):t.addListener&&t.addListener(ut)}function ut(e){var t=G(),n=(t==null?void 0:t.menuColorSetting)||{adaptableColorSchemes:["light"],lightModeColor:an,darkModeColor:un},r=n.adaptableColorSchemes,i=n.lightModeColor,o=n.darkModeColor,s=r.includes("dark");e.matches&&s?cn(C(C({},un),o)):cn(C(C({},an),i))}function cn(e){var t=e.iconColor,n=e.statusBarColor,r=e.titleTextColor,i=e.titleSubtextColor,o=e.titleButtonColor,s=e.titleBackgroundColor,a=e.progressBarColor,u=e.progressBackgroundColor,c=e.titleButtonAreaBackgroundColor,l=e.titleButtonAreaBorderColor,d=e.baseBackgroundColor,g=e.baseTextColor,v=e.lightButtonBorderColor;M("--liff-base-background-color",d),M("--liff-base-text-color",g),M("--liff-base-background-rgb-color",Qt(d)),M("--liff-base-text-rgb-color",Qt(g)),M("--liff-light-button-border-color",v),M("--liff-title-text-color",r),M("--liff-title-background-color",s),M("--liff-title-button-color",o),M("--liff-icon-color",t),M("--liff-status-bar-color",n),M("--liff-title-subtext-color",i),M("--liff-progress-bar-color",a),M("--liff-progress-background-color",u),M("--liff-title-button-area-background-color",Xt(c)),M("--liff-title-button-area-border-color",Xt(l))}function M(e,t){document.documentElement.style.setProperty(e,t)}function bo(e){return h(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,qi()];case 1:return t.sent().install(e),[2]}})})}function wo(){return h(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,F(P("certs"))];case 1:return[2,e.sent()]}})})}function yo(e,t,n){return h(this,void 0,void 0,function(){var r;return p(this,function(i){switch(i.label){case 0:return[4,crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"])];case 1:return r=i.sent(),[4,crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},r,n,t)];case 2:return[2,i.sent()]}})})}function _r(e,t){return h(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,g,v,m,w,b,O;return p(this,function(E){switch(E.label){case 0:return n=e.split("."),r=W(n,3),i=r[0],o=r[1],s=r[2],a=JSON.parse(ot.decode(i)),u=JSON.parse(ot.decodeUnicode(o)),c=Yt(ot.decode(s)),l=Yt(i+"."+o),[4,wo()];case 1:if(d=E.sent(),!(g=d.keys.find(function(K){return K.kid===a.kid})))return[3,6];if(delete g.alg,a.alg!=="ES256")throw f(de,'Invalid "alg" value in ID_TOKEN');v=void 0,E.label=2;case 2:return E.trys.push([2,4,,5]),[4,yo(g,l,c)];case 3:return v=E.sent(),[3,5];case 4:throw m=E.sent(),f(de,"Failed to use Crypto API to verify ID_TOKEN: "+m);case 5:if(v){if(w=u.iss!=="https://access.line.me",b=u.aud!==t,O=1e3*u.exp<Date.now(),w)throw f(de,'Invalid "iss" value in ID_TOKEN');if(b)throw f(de,'Invalid "aud" value in ID_TOKEN');if(O)throw f(de,'Invalid "exp" value in ID_TOKEN');return[2,u]}throw f(de,"Invalid signature in ID_TOKEN");case 6:throw f(de,'Invalid "kid" value in ID_TOKEN');case 7:return[2]}})})}function Vt(e){var t=e.split(".");if(t[1])try{var n=t[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(window.atob(n))}catch{return null}return null}function Ir(e){var t=e.pathname,n=e.query,r="liff://"+t+(n?"?"+U.stringify(n):"");location.href=r}var _t=null;function _o(){typeof _t=="boolean"&&I.warn("liff.init is not expected to be called more than once"),_t=!!Nn()||!(!_()||U.parse(window.location.hash).feature_token||Ee())&&(Rn(!0),!0)}function It(){return Boolean(_t)}function Io(e,t){return h(this,void 0,void 0,function(){var n;return p(this,function(r){switch(r.label){case 0:return(n=Ae())?[2,n]:e&&t?[4,wr({msit:e,mstVerifier:t})]:[3,2];case 1:return[2,r.sent().mst];case 2:return[2,null]}})})}function So(e){return F(P("apps")+"/"+e+"/featureToken")}function To(e){return h(this,void 0,void 0,function(){var t,n,r,i;return p(this,function(o){switch(o.label){case 0:return t=U.parse(window.location.hash),n=xi({access_token:ce(),context_token:Gn(),feature_token:Ee(),id_token:kt(),client_id:zn(),mst_challenge:At(),mst_verifier:Dn(),msit:Wn()},t),It()?z()?[4,So(e)]:[3,2]:[3,3];case 1:r=o.sent().featureToken,n.feature_token||(n.feature_token=r),o.label=2;case 2:(i=Pt(e))&&(n.client_id=i),o.label=3;case 3:return[2,n]}})})}function Eo(e){if(e.persisted&&ge("multipleLiffTransition"))if(X()==="ios")window.location.reload();else{var t=$().liffId,n=Ee();if(!t)throw f(j,"Invalid LIFF ID.");if(!n)throw f(J,"Invalid featureToken for client features");Ir({pathname:"app/"+t,query:{feature_token:n}})}}function Oo(e,t){return h(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return[4,rr(e)];case 1:return n=i.sent().client_id,r=Pt(t),[2,n===r]}})})}function Co(e,t){return h(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,d,g,v,m;return p(this,function(w){switch(w.label){case 0:return[4,new Promise(function(b){var O=re();if(!O||te(O,"9.5.0")<0)b();else if(window._liff&&window._liff.features)b();else{I.debug("cannot find window._liff.features, listen to ready event");var E=function(){I.debug("ready event is fired"),Ut("ready",E),b()};Rt("ready",E)}})];case 1:return w.sent(),_o(),[4,To(t.liffId)];case 2:if(n=w.sent(),r=n.access_token,i=n.context_token,o=n.feature_token,s=n.id_token,a=n.client_id,u=n.mst_verifier,c=n.mst_challenge,l=n.msit,i){if(typeof i!="string")throw f(j,"Cannot get context token, perhaps there is an incorrect parameter in permanent link");tt(Vt(i))}return!be()&&o&&(function(b,O){ge("multipleLiffTransition")&&Ir({pathname:"app/"+b,query:{feature_token:O}})}(t.liffId,o),It()&&pt(o)),c&&Vn(c),u&&Bn(u),a&&$t(a),l&&qn(l),window.addEventListener("pageshow",Eo),z()?[3,7]:o&&r?[3,5]:It()?(d=An(location.href,{"liff.hback":"2"}),e.login({redirectUri:d}),[4,new Promise(function(){})]):[3,4];case 3:w.sent(),w.label=4;case 4:throw e.login(),f(j,"Failed to parse feature_token or access_token");case 5:return[4,Oo(r,t.liffId)];case 6:if(!w.sent())throw e.login(),f(j,"Failed to verify access_token");pt(o),nt(r),w.label=7;case 7:return[4,Io(l,u)];case 8:return(g=w.sent())?(Hn(g),[4,yr({mst:g})]):[3,10];case 9:(v=w.sent().data)&&Qe(JSON.stringify(v)),w.label=10;case 10:return s&&!kt()&&Lt(s),s&&a&&!Mt()?[4,_r(s,a)]:[3,12];case 11:(m=w.sent())&&Nt(m),w.label=12;case 12:return[2]}})})}function Po(e){return h(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return p(this,function(u){switch(u.label){case 0:return t=P("apps"),n=t+"/"+e+"/contextToken",r=ce(),i={"Content-Type":"application/json",Accept:"application/json"},r&&(i.Authorization="Bearer "+r),[4,F(n,{headers:i})];case 1:if(o=u.sent(),!(s=o.contextToken))throw f(j,"Can not get context from server.");if(!(a=Vt(s)))throw f(j,"Invalid context token.");return[2,a]}})})}function Sr(){return h(this,void 0,void 0,function(){var e,t;return p(this,function(n){switch(n.label){case 0:if(!(e=$().liffId))throw f(j,"Invalid LIFF ID.");return[4,Po(e)];case 1:return t=n.sent(),tt(t),[2]}})})}function xo(e){return h(this,void 0,void 0,function(){var t,n,r,i=this;return p(this,function(o){switch(o.label){case 0:t=function(){return h(i,void 0,void 0,function(){var s,a,u,c,l,d;return p(this,function(g){switch(g.label){case 0:return[4,(v=$(),m=U.parse(window.location.search),w=Ft(),b={grant_type:"authorization_code",client_id:m.liffClientId,appId:v.liffId,code:m.code,code_verifier:w.codeVerifier,redirect_uri:v.redirectUri||m.liffRedirectUri,id_token_key_type:"JWK"},O=U.stringify(b),F(P("token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:O}))];case 1:return s=g.sent(),a=s.access_token,u=s.id_token,c=s.expires_in,$t(e),nt(a),Jn(new Date(Date.now()+1e3*c)),vt(),u?(Lt(u),[4,_r(u,e)]):[3,3];case 2:(l=g.sent())&&Nt(l),g.label=3;case 3:return(d=U.parse(location.hash).context_token)?(tt(Vt(d)),[3,6]):[3,4];case 4:return[4,Sr()];case 5:g.sent(),g.label=6;case 6:return[2]}var v,m,w,b,O})})},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t()];case 2:return o.sent(),[3,4];case 3:throw n=o.sent(),r=n,vt(),r;case 4:return[2]}})})}function Tr(){return h(this,void 0,void 0,function(){var e,t,n,r,i,o,s=this;return p(this,function(a){switch(a.label){case 0:return(t=we())?[3,2]:[4,Bt($e.SUB)];case 1:t=a.sent(),a.label=2;case 2:return(e=t).isReady()?(n=Se(8),[4,e.getData("appData")]):[3,8];case 3:return r=a.sent(),i=r.eventName,o=r.data,i!==Ge.NOT_FOUND?[3,6]:[4,e.teardown()];case 4:return a.sent(),[4,Tr()];case 5:return[2,a.sent()];case 6:o&&Qe(JSON.stringify(o)),a.label=7;case 7:return e.listen(function(u){return h(s,void 0,void 0,function(){var c,l;return p(this,function(d){return c=u.context,l=c.data,c.eventName===S.INIT&&(l==null?void 0:l.subWindowId)!==n&&Le(),c.eventName!==S.CANCEL&&c.eventName!==S.SUBMIT||e.teardown(),[2]})})}),z()&&e.send({eventName:S.INIT,data:{subWindowId:n,hasOpener:!!window.opener}}),[3,10];case 8:return Wt()?[3,10]:[4,new Promise(function(u){window.addEventListener("message",function(c){return function l(d){var g=d.data,v=d.source,m=d.origin;if(g){var w=g.type,b=g.message;w===Xe&&(window.removeEventListener("message",l),b&&Qe(b),gr(m),v&&v.postMessage&&v.postMessage({status:Xe},m),c())}}}(u))})];case 9:return[2,a.sent()];case 10:return[2]}})})}var Ao=new(function(){function e(){var t=this;this.getAndValidateContext=function(){var n=G();if(!n)throw f(j,"Could not get Context from server.");if(!n.endpointUrl)throw f(j,"Could not get endpointUrl from server.");if(!n.permanentLinkPattern)throw f(j,"Could not get permanentLinkPattern from server.");return n},this.decodeState=function(n){var r=t.getAndValidateContext();n=n.replace(/\n/g,"%0D%0A");var i=!r.endpointUrl.startsWith("/?")&&r.endpointUrl.includes("/?")||!r.endpointUrl.startsWith("/#")&&r.endpointUrl.includes("/#")||r.endpointUrl.endsWith("/")||!n.startsWith("/?")&&n.includes("/?")||!n.startsWith("/#")&&n.includes("/#")||n.endsWith("/"),o=new URL(r.endpointUrl),s=o.origin,a=o.pathname,u=o.search,c=new URL(""+s+t.attachSlashAtStart(n)),l=c.pathname,d=c.search,g=c.hash,v=""+u+(u?d.replace(/\?/g,"&"):d),m=(""+a+t.attachSlashAtStart(l)).replace("//","/");return(m=t.attachSlashAtStart(""+m)).endsWith("/")&&!i&&(m=m.substring(0,m.length-1)),(""+s+m+v+g).replace(/%0D%0A/g,`
`)}}return e.prototype.attachSlashAtStart=function(t){return(t&&t.length>0&&!t.startsWith("/")?"/":"")+t},e.prototype.invoke=function(){return h(this,void 0,void 0,function(){var t,n,r,i,o;return p(this,function(s){switch(s.label){case 0:if(t=U.parse(window.location.search),typeof(n=t["liff.state"])!="string")return[2];s.label=1;case 1:return s.trys.push([1,4,,5]),r=location.href,(i=this.decodeState(n))===r?[3,3]:(t["liff.hback"]?location.replace(An(i,{"liff.hback":t["liff.hback"]})):location.replace(i),[4,new Promise(function(){})]);case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if((o=s.sent()).code===j)throw o;return I.debug(o),[3,5];case 5:return[2]}})})},e}());function $o(e,t,n){return h(this,void 0,void 0,function(){var r;return p(this,function(i){switch(i.label){case 0:if(!t.liffId)throw f(ne,"liffId is necessary for liff.init()");return Fn(t),!_()&&z()&&(Xn()||Zn()),r=U.parse(window.location.search),!be()||_()?[3,2]:[4,Tr()];case 1:i.sent(),i.label=2;case 2:if(r.error&&r.liffOAuth2Error)throw a=r.error,u=r.error_description,c=u.replace(/\+/g," "),f(j,a+": "+c);return o=r.code,s=Ft(),Boolean(o&&!z()&&s&&s.codeVerifier)?[4,xo(r.liffClientId)]:[3,4];case 3:i.sent(),i.label=4;case 4:return _()?[4,Co(e,t)]:[3,6];case 5:return i.sent(),[3,8];case 6:return z()?[3,8]:[4,Sr()];case 7:i.sent(),i.label=8;case 8:return[4,Ao.invoke()];case 9:return i.sent(),[4,n()];case 10:return i.sent(),Oi(window.location.href),[2]}var o,s,a,u,c})})}var ln=function(e,t){return new Promise(function(n,r){if(e){var i=document.createElement("script");i.type="module",i.onload=function(){n()},i.src=e,document.head.appendChild(i)}else r(f(ne,t))})};function ko(){return h(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return _()||X()!=="android"||(e=U.parse(window.location.search))[ir]||!(e.liffClientId&&document.referrer===""||document.referrer.includes("liffClientId"))||e.liffIsEscapedFromApp?[3,4]:[4,ln("https://static.line-scdn.net/lui/edge/versions/1.13.0/luivendor.js","LUI_VENDOR_URL is not defined")];case 1:return t.sent(),[4,ln("https://static.line-scdn.net/lui/edge/versions/1.13.0/lui-alert.js","LUI_ALERT_URL is not defined")];case 2:return t.sent(),[4,(n=Se(6),new Promise(function(){var r=document.createElement("div");r.innerHTML='<lui-alert id="liffAlert-'+n+'" shown title="Login successfully!" message="Continue to launch LIFF app!"></lui-alert>',document.body.appendChild(r);var i=document.getElementById("liffAlert-"+n);i&&i.addEventListener("lui-button-click",function(){var o=window.open(window.location.href+"&liffIsEscapedFromApp=true","_blank");o&&(o.location.href=window.location.href+"&liffIsEscapedFromApp=true",window.close())})}))];case 3:t.sent(),t.label=4;case 4:return[2]}var n})})}var Lo=function(){function e(){this.hooks={before:new Ce,after:new Ce},this.internalHooks={beforeFinished:new Ce,beforeSuccess:new Ce,error:new Ce}}return Object.defineProperty(e.prototype,"name",{get:function(){return"init"},enumerable:!1,configurable:!0}),e.prototype.install=function(t){var n=t.liff;return this.liff=n,this.init.bind(this)},e.prototype.init=function(t,n,r){return h(this,void 0,void 0,function(){var i;return p(this,function(o){switch(o.label){case 0:return[4,this.hooks.before.call()];case 1:o.sent(),s=this.liff,window&&!window.liff&&(window.liff=s),o.label=2;case 2:return o.trys.push([2,9,,11]),[4,Promise.all([bo(this.liff),$o(this.liff,t,this.internalHooks.beforeFinished.call)])];case 3:return o.sent(),mo(),[4,this.internalHooks.beforeSuccess.call()];case 4:return o.sent(),!t.withLoginOnExternalBrowser||z()?[3,6]:(this.liff.login(),[4,new Promise(function(){})]);case 5:o.sent(),o.label=6;case 6:return[4,ko()];case 7:return o.sent(),[4,this.hooks.after.call()];case 8:return o.sent(),typeof n=="function"&&n(),Ot(),[3,11];case 9:return i=o.sent(),[4,this.internalHooks.error.call(i)];case 10:throw o.sent(),typeof r=="function"&&r(i),i;case 11:return[2]}var s})})},e}(),jo=Object.freeze(Object.defineProperty({__proto__:null,InitModule:Lo},Symbol.toStringTag,{value:"Module"})),Fo=T(jo);function zt(){return"2.20.2"}var Mo=Object.freeze(Object.defineProperty({__proto__:null,getVersion:zt},Symbol.toStringTag,{value:"Module"})),Er={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.sha256=n()})(Hr,function(){var t=function n(r){function i(Re,Ue){return Re>>>Ue|Re<<32-Ue}for(var o=Math.pow,s=o(2,32),a="length",u,c,l="",d=[],g=r[a]*8,v=n.h=n.h||[],m=n.k=n.k||[],w=m[a],b={},O=2;w<64;O++)if(!b[O]){for(u=0;u<313;u+=O)b[u]=O;v[w]=o(O,.5)*s|0,m[w++]=o(O,.3333333333333333)*s|0}for(r+="\x80";r[a]%64-56;)r+="\0";for(u=0;u<r[a];u++){if(c=r.charCodeAt(u),c>>8)return;d[u>>2]|=c<<(3-u)%4*8}for(d[d[a]]=g/s|0,d[d[a]]=g,c=0;c<d[a];){var E=d.slice(c,c+=16),K=v;for(v=v.slice(0,8),u=0;u<64;u++){var le=E[u-15],Z=E[u-2],ee=v[0],fe=v[4],ie=v[7]+(i(fe,6)^i(fe,11)^i(fe,25))+(fe&v[5]^~fe&v[6])+m[u]+(E[u]=u<16?E[u]:E[u-16]+(i(le,7)^i(le,18)^le>>>3)+E[u-7]+(i(Z,17)^i(Z,19)^Z>>>10)|0),rt=(i(ee,2)^i(ee,13)^i(ee,22))+(ee&v[1]^ee&v[2]^v[1]&v[2]);v=[ie+rt|0].concat(v),v[4]=v[4]+ie|0}for(u=0;u<8;u++)v[u]=v[u]+K[u]|0}for(u=0;u<8;u++)for(c=3;c+1;c--){var Ne=v[u]>>c*8&255;l+=(Ne<16?0:"")+Ne.toString(16)}return l};return t.code='var sha256=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\\x80";b[h]%64-56;)b+="\\x00";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i};',t})})(Er);var No=Er.exports,Ro=function(){function e(){this.hooks={before:new go}}return Object.defineProperty(e.prototype,"name",{get:function(){return"login"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return this.login.bind(this)},e.prototype.login=function(t){var n;this.hooks.before.call(t);var r=Se(43),i=Ii(No(r)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),o=$();if(!o||!o.liffId)throw f(ne,"You need to define `liffId` for liff.login()");var s={app_id:o.liffId,state:Se(12),response_type:"code",code_challenge_method:"S256",code_challenge:i,liff_sdk_version:zt()};t&&t.redirectUri&&(s.redirect_uri=t.redirectUri),be()&&!_()&&(!((n=we())===null||n===void 0)&&n.isReady()?s.redirect_uri=window.location.href:s.disable_auto_login="true"),Kn({codeVerifier:r});var a=P("authorize")+"?"+U.stringify(s);I.debug("[Redirect] "+a),window.location.href=a},e}(),Uo=Object.freeze(Object.defineProperty({__proto__:null,LoginModule:Ro},Symbol.toStringTag,{value:"Module"})),Do=T(Uo),Bo=T(Fi),Wo=T($i),qo=T(pi),Ho=T(Ri),Vo=T(Mo);function zo(){return navigator.language}var Go=Object.freeze(Object.defineProperty({__proto__:null,getLanguage:zo},Symbol.toStringTag,{value:"Module"})),Ko=T(Go);function Or(){return F(P("profile"))}var Jo=Object.freeze(Object.defineProperty({__proto__:null,getProfile:Or},Symbol.toStringTag,{value:"Module"})),Xo=T(Jo),Qo=T(Mi),Yo=T(Hi),Zo=T(ao),es=T(Ui),ts=T(Xi),ns=function(e,t){return e?"&"+e.split("&").filter(function(n){return n.indexOf("is_liff_external_open_window")===-1}).join("&").concat(t?"#"+t:""):t?"#"+t:""};function rs(e){if(!function(o){if(!o||typeof o!="object")return!1;var s=o,a=s.url,u=s.external,c=W([typeof a,typeof u],2),l=c[0],d=c[1];return l==="string"&&a!==""&&(d==="undefined"||d==="boolean")}(e))throw f(k,"Invalid parameters for liff.openWindow()");var t=re();if(_())if(t!==null&&X()==="ios"&&te(t,"9.19")>=0||!window._liff.postMessage){var n=e.url,r=e.external,i=r!==void 0&&r;window.open(function(o,s){var a,u,c,l,d,g,v,m,w;return function(b){return b.indexOf("#")!==-1&&b.indexOf("?")!==-1&&b.indexOf("#")<b.indexOf("?")}(o)||function(b){return b.indexOf("?")===-1&&b.indexOf("#")!==-1}(o)?(v=(a=W(o.split("#"),2))[0],u=a[1],m=(c=W((u===void 0?"":u).split("?"),2))[0],w=c[1]):(v=(l=W(o.split("?"),2))[0],d=l[1],w=(g=W((d===void 0?"":d).split("#"),2))[0],m=g[1]),v+"?is_liff_external_open_window="+!!s+ns(w,m)}(n,i))}else Dt("openWindow",e);else window.open(e.url,"_blank")}var is=Object.freeze(Object.defineProperty({__proto__:null,openWindow:rs},Symbol.toStringTag,{value:"Module"})),os=T(is),ss=T(uo),as=function(e){return typeof e=="object"&&e!==null&&function(t){return typeof t=="string"||t instanceof String}(e.type)};function fn(e){return Promise.reject(f(k,e))}function us(e){if(!function(n){return Array.isArray(n)&&n.every(as)}(e))return fn("Parameter 'messages' must be an array of { type, ... }");var t=e.length;return t<1||t>5?fn("Number of messages should be in range 1 to 5."):F(P("message"),{method:"POST",body:JSON.stringify({messages:e})}).catch(Cr)}var Cr=function(e){if(e.code==="403"){var t=re()==="12.0.0",n=X()==="ios",r=xt();t&&(n||r)&&window.alert(`LINE\u30A2\u30D7\u30EA\u3092LINE 12.0.1\u4EE5\u964D\u306B\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u3057\u3066\u304F\u3060\u3055\u3044\u3002
Please update your LINE app to LINE 12.0.1 or later.`)}throw e},cs=Object.freeze(Object.defineProperty({__proto__:null,alertToPromptUpdate:Cr,sendMessages:us},Symbol.toStringTag,{value:"Module"})),ls=T(cs);function fs(){return F(P("friendship"))}var ds=Object.freeze(Object.defineProperty({__proto__:null,getFriendship:fs},Symbol.toStringTag,{value:"Module"})),hs=T(ds),ps=T(vo),vs=function(e,t){this._driver=e,this.liff=t,this.hooks=this._driver.hooks,this.internalHooks=this._driver.internalHooks},gs=function(e,t){this._driver=e,this.liff=t,this.hooks=this._driver.hooks},ms=function(){function e(){this.modules=new Map,this.hooks={},this.internalHooks={}}return e.prototype.addModule=function(t,n){this.modules.set(t,n),n.hooks&&(this.hooks[t]=Object.entries(n.hooks).reduce(function(r,i){var o,s=W(i,2),a=s[0],u=s[1];return C(C({},r),((o={})[a]=u.on.bind(u),o))},{})),n.internalHooks&&(this.internalHooks[t]=Object.entries(n.internalHooks).reduce(function(r,i){var o,s=W(i,2),a=s[0],u=s[1];return C(C({},r),((o={})[a]=u.on.bind(u),o))},{}))},e.prototype.hasModule=function(t){return this.modules.has(t)},e}(),bs=function(){function e(t,n,r){this.driver=t,this.context=n,this.option=r}return e.prototype.install=function(){return this.factory(this.driver,this.context)},Object.defineProperty(e.prototype,"name",{get:function(){return"use"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOption",{get:function(){return{namespacePrefix:"$"}},enumerable:!1,configurable:!0}),e.prototype.factory=function(t,n){var r=Object.assign({},this.defaultOption,this.option).namespacePrefix;return function(i,o){if(!i||typeof i.install!="function"||typeof i.name!="string")return I.warn("To install the plugin, you need to define the `name` property and the `install` method."),this;var s=""+r+i.name;if(t.hasModule(s))return this;var a=i.install.call(i,n,o);return this[""+s]?(I.warn("There is a duplicate plugin name. `"+s+"` plugin namespace will be override."),this[""+s]=a):a!==void 0&&(this[""+s]=a),t.addModule(s,i),this}},e}(),ws=Object.freeze(Object.defineProperty({__proto__:null,LiffPluginContextImpl:gs,ModuleContextImpl:vs,ModuleDriverImpl:ms,UseModule:bs},Symbol.toStringTag,{value:"Module"})),ys=T(ws);function _s(){return h(this,void 0,void 0,function(){var e,t;return p(this,function(n){switch(n.label){case 0:if(!z())return[3,6];n.label=1;case 1:return n.trys.push([1,5,,6]),(e=Mt())&&e.sub?[2,e.sub]:[3,2];case 2:return[4,Or()];case 3:if((t=n.sent())&&t.userId)return[2,t.userId];n.label=4;case 4:return[3,6];case 5:return n.sent(),I.debug("can't retrieve Mid/Uid because of something wrong"),[3,6];case 6:return[2]}})})}function Is(){return h(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,_s()];case 1:return(e=t.sent())&&e.substring(0,1)==="u"?[2,e]:[2]}})})}var Ss=function(){function e(){this.utsExtra={isLiffSuccessful:!1,isLoggedIn:!1,id:"",version:""},this.injected=!1}return Object.defineProperty(e,"CUSTOMPLACEID_INIT",{get:function(){return"liff.init"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"CUSTOMTYPE",{get:function(){return"liffSdk"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"GENERAL_UTS_ID",{get:function(){return"liff_general"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"GENERAL_APP_NAME",{get:function(){return"LIFF General"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"LiffUtsLoginStatus",{get:function(){return{isLoggedIn:1,isLiffSuccessful:2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"analytics"},enumerable:!1,configurable:!0}),e.prototype.install=function(t){var n=t.liff,r=t.internalHooks;this.liffCore=n,r.init.beforeFinished(this.beforeInitFinished.bind(this)),r.init.beforeSuccess(this.beforeInitSuccess.bind(this)),r.init.error(this.initError.bind(this))},e.prototype.changeRatioToUTSFormat=function(t){if(t&&Number.isFinite(t))return Math.round(100*t)},e.prototype.setExtra=function(){var t=this.utsExtra,n=t.isLiffSuccessful,r=t.isLoggedIn,i=t.id,o=t.version,s=(r?e.LiffUtsLoginStatus.isLoggedIn:0)|(n?e.LiffUtsLoginStatus.isLiffSuccessful:0);this.uts.setExtra("liff",{id:i,loginStatus:s,version:o})},e.prototype.assignUtsExtra=function(t){Object.assign(this.utsExtra,t)},e.prototype.setVersion=function(t){this.assignUtsExtra({version:t}),I.debug("[LIFFUTS][SDK version] "+t),this.setExtra()},e.prototype.setLiffId=function(t){this.assignUtsExtra({id:t}),I.debug("[LIFFUTS][LIFFID] "+t),this.setExtra()},e.prototype.setIsLoggedIn=function(t){this.assignUtsExtra({isLoggedIn:t}),I.debug("[LIFFUTS][isLoggedIn] "+t),this.setExtra()},e.prototype.sendLiffInit=function(){I.debug("[LIFFUTS][sendCustom] liff.init"),this.uts.sendCustom({type:e.CUSTOMTYPE,params:{placeId:e.CUSTOMPLACEID_INIT}})},e.prototype.setIsLiffSuccessful=function(t){this.assignUtsExtra({isLiffSuccessful:t}),I.debug("[LIFFUTS][isLiffInitSuccessful] "+t),this.setExtra()},e.prototype.prepareReferrer=function(t){var n={};Object.keys(t).forEach(function(r){if(gi.includes(r)){var i=t[r];typeof i=="string"&&i&&(n[r.replace(/^liff\.ref\./,"")]=i)}}),Object.keys(n).length>0&&(this.referrer=n)},e.prototype.beforeInitFinished=function(){return h(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,d,g,v;return p(this,function(m){switch(m.label){case 0:if(t=U.parse(window.location.search),this.prepareReferrer(t),n=G(),!(r=n==null?void 0:n.utsTracking))return[2];if((i=r.mode)!=="auto"&&i!=="force")return[3,6];I.debug("[LIFFUTS] "+new Date().toUTCString()),o=$(),s=o.liffId,a=o.analytics,m.label=1;case 1:return m.trys.push([1,3,,4]),u=this,[4,new Promise(function(w,b){var O=window.uts,E=document.createElement("script");E.type="text/javascript",E.src="https://static.line-scdn.net/uts/edge/4.1.0/uts.js",E.onload=function(){var K=window.uts;w(K),window.uts=O},E.onerror=function(K){b(K)},document.getElementsByTagName("head")[0].appendChild(E)})];case 2:return u.uts=m.sent(),[3,4];case 3:return c=m.sent(),I.debug("[LIFFUTS] cannot load UTS, reason: "+c),[2];case 4:return l=void 0,d=void 0,i==="force"?(l={utsId:e.GENERAL_UTS_ID,appName:e.GENERAL_APP_NAME,appEnv:"release"},d={endpoint:"https://uts-front.line-apps.com",sampleRate:this.changeRatioToUTSFormat(r.sendRatio),version:"current"}):(l=C(C({},a==null?void 0:a.context),{utsId:(a==null?void 0:a.context.utsId)||e.GENERAL_UTS_ID,appName:(a==null?void 0:a.context.appName)||e.GENERAL_APP_NAME,appEnv:(a==null?void 0:a.context.appEnv)||"release"}),d=C(C({endpoint:"https://uts-front.line-apps.com"},a==null?void 0:a.options),{sampleRate:this.changeRatioToUTSFormat(r.sendRatio),version:"current"})),this.uts.init(l,d),[4,Is()];case 5:(g=m.sent())&&(I.debug("[LIFFUTS][mid] "+g),this.uts.setMid(g)),n!=null&&n.tid&&(I.debug("[LIFFUTS][tid] "+n.tid),this.uts.setTid(n.tid)),this.referrer&&(I.debug("liff.ref.referrer",this.referrer),this.uts.setSessionParams(this.referrer)),s&&this.setLiffId(s),this.setIsLoggedIn(z()),this.setVersion(zt()),v=xn(location.href),I.debug("[LIFFUTS][url] "+v),this.uts.setUrl(v),this.liffCore.analytics=this.uts,this.injected=!0,m.label=6;case 6:return[2]}})})},e.prototype.beforeInitSuccess=function(){return this.injected&&(this.setIsLiffSuccessful(!0),this.sendLiffInit()),Promise.resolve()},e.prototype.initError=function(){return this.injected&&(this.setIsLiffSuccessful(!1),this.sendLiffInit()),Promise.resolve()},e}(),Pr=function(e){I.debug("[LIFFUTS][sendCustom] liff.shareTargetPicker"),e.sendCustom({type:"liffSdk",params:{placeId:"liff.shareTargetPicker"}})},Ts=Object.freeze(Object.defineProperty({__proto__:null,AnalyticsModule:Ss,sendShareTargetPicker:Pr},Symbol.toStringTag,{value:"Module"})),Es=T(Ts);function Os(e){return h(this,void 0,void 0,function(){var t,n;return p(this,function(r){switch(r.label){case 0:return[4,fetch(P("permanentLink"),{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify(e)})];case 1:return(t=r.sent()).ok?[3,3]:[4,t.json()];case 2:throw n=r.sent().message,f(R,n);case 3:return[4,t.json()];case 4:return[2,r.sent()]}})})}var xr=function(){function e(){var t=this;this.extraParams="",this.getAndValidateContext=function(){var n=G();if(!n)throw f(j,"Could not get Context from server.");if(!n.endpointUrl)throw f(j,"Could not get endpointUrl from server.");if(!n.permanentLinkPattern)throw f(j,"Could not get permanentLinkPattern from server.");return n},this.createUrl=function(){var n=t.getAndValidateContext(),r=window.location,i=r.pathname,o=r.search,s=r.hash,a=r.origin,u=new URL(n.endpointUrl);if(u.origin!==a||!t.isAncestor(u.pathname,i))throw f(ne,"Current page is not under entrypoint.");var c=i.substring(u.pathname.length);c.length>0&&c[0]!=="/"&&(c="/"+c);var l=new RegExp("^"+En.join("|")),d=s.substring(1).split("&").filter(function(Z){return!l.test(Z)&&Boolean(Z)}).join("&"),g=d===u.hash.substring(1)?"":d,v=function(Z){return Z.substring(1).split("&").filter(function(ee){return!/liff\.state/.test(ee)&&Boolean(ee)})},m=v(o),w=v(u.search);t.extraParams&&m.push(t.extraParams);for(var b=0;b<w.length;b++){var O=w[b],E=m.indexOf(O);E>-1&&m.splice(E,1)}var K=m.join("&"),le=c+(K!==""?"?"+K:"")+(g?"#"+g:"");return""+Tn+$().liffId+le},this.createUrlBy=function(n){return h(t,void 0,void 0,function(){var r,i;return p(this,function(o){switch(o.label){case 0:if(!(r=$().liffId))throw f(j,"Should run after liff init.");try{i=new URL(n)}catch{throw f(k,"invalid URL.")}return[4,Os({liffId:r,currentPageUrl:i.toString()})];case 1:return[2,o.sent().permanentLinkUrl]}})})},this.setExtraQueryParam=function(n){t.extraParams=n},this.isAncestor=function(n,r){return r.indexOf(n)===0&&(n.endsWith("/")&&(n=n.substring(0,n.length-1)),r[n.length]===void 0||r[n.length]==="/")},this.install=function(){return{createUrl:t.createUrl,createUrlBy:t.createUrlBy,setExtraQueryParam:t.setExtraQueryParam}}}return Object.defineProperty(e.prototype,"name",{get:function(){return"permanentLink"},enumerable:!1,configurable:!0}),e}(),Cs=new xr,Ps=Object.freeze(Object.defineProperty({__proto__:null,PermanentLink:xr,module:Cs},Symbol.toStringTag,{value:"Module"})),xs=T(Ps),As=T(Gi),Ie,$s=function(){function e(t,n){var r=this;this.resolve=t,this.reject=n,this.onSubmit=function(i){var o=i.message;r.resolve({value:o}),r.destroy()},this.onClose=function(){r.resolve({value:null}),r.destroy()},this.onCancel=function(){r.resolve({value:null}),r.destroy()},this.onError=function(i){r.reject(i),r.destroy()},this.start()}return e.prototype.start=function(){V.on("submit",this.onSubmit),V.on("close",this.onClose),V.on("cancel",this.onCancel),V.on("error",this.onError)},e.prototype.destroy=function(){V.off("submit",this.onSubmit),V.off("close",this.onClose),V.off("cancel",this.onCancel),V.off("error",this.onError),Ie=void 0},e}();function ks(){return h(this,void 0,void 0,function(){return p(this,function(e){if(!ge("subwindowOpen")||!ge("scanCodeV2"))throw f(J,"No permission for liff.scanCodeV2()");return Ie&&Ie.destroy(),[2,new Promise(function(t,n){Ie=new $s(t,n),V.open({url:"https://liff.line.me/1656359117-jxmx5e11"}).catch(function(r){Ie==null||Ie.destroy(),n(r)})})]})})}var Ar=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"scanCodeV2"},enumerable:!1,configurable:!0}),e.prototype.install=function(){return ks},e}(),Ls=new Ar,js=Object.freeze(Object.defineProperty({__proto__:null,ScanCodeV2Module:Ar,module:Ls},Symbol.toStringTag,{value:"Module"})),Fs=T(js);function $r(e){return h(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return p(this,function(u){switch(u.label){case 0:return function(c){if(!wi.includes(c))throw f(k,"Unexpected permission name.");var l=G();return!!(l!=null&&l.scope.includes(c))}(e)?(t=ce())?[4,rr(t)]:[3,2]:[2,{state:"unavailable"}];case 1:n=u.sent(),r=unescape(n.scope).split(" ");try{for(i=et(r),o=i.next();!o.done;o=i.next())if(o.value.includes(e))return[2,{state:"granted"}]}catch(c){s={error:c}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(s)throw s.error}}return[2,{state:"prompt"}];case 2:throw f(q,"LiffId is not found.")}})})}function kr(){var e,t,n=G();return!!n&&n.type!=="square_chat"&&(ge("skipChannelVerificationScreen")||!_()&&((t=(e=n.availability)===null||e===void 0?void 0:e.skipChannelVerificationScreen)===null||t===void 0?void 0:t.permission))}function Ms(){var e=$().liffId;if(e)return F(P("unauthorizedPermissions")+"?liffId="+e,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+ce()}});throw f(q,"liffId is required")}var Je,He=V.on,Ve=V.off,Ns=V.open,Rs=function(){function e(t,n){var r=this;this.onSubmit=function(i){var o=i.newAccessToken,s=i.ICA_ERROR;return h(r,void 0,void 0,function(){return p(this,function(a){return o?this.resolve({newAccessToken:o}):s&&this.reject(f(R,s)),this.teardown(),[2]})})},this.onClose=function(){return h(r,void 0,void 0,function(){return p(this,function(i){return this.reject(f(q,"user didn't allow the agreement")),this.teardown(),[2]})})},this.onCancel=function(){return h(r,void 0,void 0,function(){return p(this,function(i){return this.reject(f(q,"user didn't allow the agreement")),this.teardown(),[2]})})},this.onError=function(i){return h(r,void 0,void 0,function(){return p(this,function(o){return this.reject(i),this.teardown(),[2]})})},this.resolve=t,this.reject=n,this.setup()}return e.prototype.setup=function(){He("submit",this.onSubmit),He("close",this.onClose),He("cancel",this.onCancel),He("error",this.onError)},e.prototype.teardown=function(){Ve("submit",this.onSubmit),Ve("close",this.onClose),Ve("cancel",this.onCancel),Ve("error",this.onError),Je=void 0},e.prototype.open=function(){var t=$().liffId;t?Ns({url:"https://liff.line.me/1656032314-Xgrw5Pmk",appData:{liffId:t,channelId:Pt(t),accessToken:ce()}}):this.reject(f(q,"liffId is required"))},e}();function Lr(){return h(this,void 0,void 0,function(){var e,t;return p(this,function(n){switch(n.label){case 0:if(!kr())throw f(J,"SkipChannelVerificationScreen is unavailable.");return Je&&Je.teardown(),[4,Ms()];case 1:return e=n.sent(),(_()?e:e.filter(function(r){return r!=="chat_message.write"})).length>0?[4,new Promise(function(r,i){(Je=new Rs(r,i)).open()})]:[3,3];case 2:return t=n.sent().newAccessToken,nt(t),[3,4];case 3:throw f(J,"All permissions have already been approved.");case 4:return[2]}})})}function Us(e,t){var n=this;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return h(n,void 0,void 0,function(){var o,s,a;return p(this,function(u){switch(u.label){case 0:return o=(r.length>0?r[r.length-1]:{}).ignorePermissionCheck,s=o!==void 0&&o,[4,$r(t)];case 1:if((a=u.sent().state)!=="unavailable")return[3,2];throw f(J,"The permission is not in LIFF app scope.");case 2:return a!=="prompt"||!kr()||s||!_()&&t==="chat_message.write"?[3,4]:[4,Lr()];case 3:return u.sent(),[3,5];case 4:s&&r.pop(),u.label=5;case 5:return[4,e.apply(void 0,ae(r))];case 6:return[2,u.sent()]}})})}}var jr=function(){function e(){this.name="permission"}return e.prototype.install=function(){return{query:$r,requestAll:Lr}},e}(),Ds=new jr,Bs=Object.freeze(Object.defineProperty({__proto__:null,PermissionModule:jr,attachChecker:Us,module:Ds},Symbol.toStringTag,{value:"Module"})),Ws=T(Bs),Fr={};function qs(){return Fr}function Mr(e,t){var n=qs(),r=W(t.split("."),1)[0],i=n[t];i&&e.removeEventListener(r,i),n[t]=null}var dn=!1,hn=!1;function Hs(e,t,n,r){dn||(hn=function(){var o=!1;try{var s=Object.defineProperty({},"passive",{get:function(){return o=!0,!1}});window.addEventListener("test",s,s),window.removeEventListener("test",s,s)}catch{o=!1}return o}(),dn=!0);var i=W(t.split("."),1)[0];return new Promise(function(o){var s=function(a){o(a),n&&n(a),r&&r.once&&Mr(e,t)};(function(a,u){Fr[a]=u})(t,s),e.addEventListener(i,s,!!hn&&r)})}function pn(e,t,n,r){if(n===void 0&&(n={}),typeof e!="object"||!e.postMessage)throw f(k,"target must be window object");if(typeof t!="string")throw f(k,"keyname must be string");if(typeof n!="object")throw f(k,"incorrect body format. It should be Object or Array comprised of Object");if(!r)throw f(k,"serverEndPointUrl isn't passed. please fill up with proper url");if(r==="*")throw new Error("serverEndPointUrl doesn't allow to set '*'");var i={name:t,body:n};e.postMessage(i,r)}function Vs(e,t,n,r){Hs(e,"message."+t,function(i,o,s){return function(a){I.debug("messageReceive",a),a.origin===s&&a.data.name===i&&o(a)}}(t,n,r))}var zs=function(){function e(){this.payloadToShareTargetPicker=null,this.popupWindow=null,this.doesWaitForSubwindowResult=!1}return e.getInstance=function(){return e.instance?e.instance.reset():e.instance=new e,e.instance},e.prototype.init=function(t){return h(this,void 0,void 0,function(){var n,r;return p(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),this.liffId=t.referrer.liffId,this.doesWaitForSubwindowResult=!(!t.options||!t.options.waitForSubwindowResult),this.allowPostMessageOrigin=this.initAllowPostMessageOrigin(),this.payloadToShareTargetPicker=this.buildPayloadToShareTargetPicker(t),window.AbortController&&(this.abortController=new window.AbortController),this.prepareAnotherWindow(),[4,this.initOtt()];case 1:return i.sent(),this.initListener(),this.openAnotherWindow(),this.doesWaitForSubwindowResult?[4,this.pollingShareResult()]:[3,3];case 2:return n=i.sent(),this.finalize(),[2,n];case 3:return[2];case 4:return[3,6];case 5:if(r=i.sent(),this.finalize(),r.name!=="AbortError")throw r;return[3,6];case 6:return[2]}})})},e.prototype.resetAllVariables=function(){this.liffId="",this.allowPostMessageOrigin="",this.payloadToShareTargetPicker=null,this.ott="",this.popupWindow=null,this.timeoutIDForHealthCheck=null,this.abortController=null,this.internalError=null,this.doesWaitForSubwindowResult=!1},e.prototype.reset=function(){this.finalize(),this.resetAllVariables()},e.prototype.finalize=function(){var t,n;this.abortController&&this.abortController.abort(),_()||(t=this.timeoutIDForHealthCheck,n=this.popupWindow,Mr(window,"message.receivedHealthcheck"),t&&clearTimeout(t),n&&!n.closed&&n.close())},e.prototype.buildPayloadToShareTargetPicker=function(t){return{messages:t.messages,isMultiple:t.isMultiple,referrer:t.referrer}},e.prototype.initAllowPostMessageOrigin=function(t){return t===void 0&&(t=P("shareTargetPicker")),Ci(t)},e.prototype.initOtt=function(){return h(this,void 0,void 0,function(){var t,n,r;return p(this,function(i){switch(i.label){case 0:return this.abortController&&(t=this.abortController.signal),n=P("shareTargetPickerOtt")+"/"+this.liffId+"/ott",r=this,[4,F(n,{method:"GET",signal:t}).then(function(o){return o.ott})];case 1:return r.ott=i.sent(),[2]}})})},e.prototype.prepareAnotherWindow=function(){_()||(X()!=="ios"||xt()?this.popupWindow=window.open("","liffpopup","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):this.popupWindow=window.open())},e.prototype.openAnotherWindow=function(){if(_()&&this.payloadToShareTargetPicker)t=this.liffId,n=this.ott,r=this.payloadToShareTargetPicker,i={liffId:t,ott:n,data:JSON.stringify(r),closeModals:!1},location.href="line://picker?"+U.stringify(i);else{if(this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),!this.popupWindow)throw f(dt);(function(o,s,a){var u={liffId:s,ott:a};o.location.href=P("shareTargetPicker")+"?"+U.stringify(u)})(this.popupWindow,this.liffId,this.ott)}var t,n,r,i},e.prototype.initListener=function(){var t,n;_()||(t=this.onReceivedHealthcheck.bind(this),n=this.allowPostMessageOrigin,Vs(window,"receivedHealthcheck",t,n))},e.prototype.healthCheck=function(){return h(this,void 0,void 0,function(){var t;return p(this,function(n){switch(n.label){case 0:if(this.popupWindow&&!this.popupWindow.closed)return[3,7];if(!this.doesWaitForSubwindowResult)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.onCanceled()];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),this.internalError=t,[3,4];case 4:return[3,6];case 5:this.finalize(),n.label=6;case 6:return[3,8];case 7:r=this.popupWindow,i=this.allowPostMessageOrigin,pn(r,"healthcheck",void 0,i),this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),n.label=8;case 8:return[2]}var r,i})})},e.prototype.onReceivedHealthcheck=function(){if(!this.popupWindow||!this.payloadToShareTargetPicker)throw f(dt);var t,n,r;t=this.popupWindow,n=this.payloadToShareTargetPicker,r=this.allowPostMessageOrigin,pn(t,"ready",n,r)},e.prototype.onCanceled=function(){return h(this,void 0,void 0,function(){var t,n;return p(this,function(r){switch(r.label){case 0:if(_()||!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(t=this.abortController.signal),n={liffId:this.liffId,ott:this.ott},[4,F(P("shareTargetPickerResult")+"?"+U.stringify(n),{method:"POST",signal:t,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:"result=CANCEL"})];case 1:return[2,r.sent().status==="ok"]}})})},e.prototype.getShareResult=function(){return h(this,void 0,void 0,function(){var t,n;return p(this,function(r){if(!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(t=this.abortController.signal),n={liffId:this.liffId,ott:this.ott},I.debug("fetch: getShareResult"),[2,F(P("shareTargetPickerResult")+"?"+U.stringify(n),{method:"GET",headers:{Accept:"application/json"},signal:t})]})})},e.isPollingTimeOut=function(t,n){return(n-t)/6e4>=10},e.prototype.pollingShareResult=function(){return h(this,void 0,void 0,function(){var t,n;return p(this,function(r){switch(r.label){case 0:t=Date.now(),r.label=1;case 1:if(e.isPollingTimeOut(t,Date.now()))return[3,4];if(this.internalError)throw this.internalError;return[4,this.getShareResult()];case 2:if((n=r.sent())&&n.result)switch(n.result){case"SUCCESS":return[2,{status:"success"}];case"CANCEL":return[2];case"FAILURE":default:throw new Error(n.resultDescription)}return[4,new Promise(function(i){setTimeout(i,500)})];case 3:return r.sent(),[3,1];case 4:throw new Error("Timeout: not finished within 10min")}})})},e}(),Nr=function(){function e(){var t=this;this.name="shareTargetPicker",this.shareTargetPicker=function(n,r){return r===void 0&&(r={}),h(t,void 0,void 0,function(){var i,o,s,a,u,c,l;return p(this,function(d){switch(d.label){case 0:if(i=r.isMultiple===void 0||r.isMultiple,this.checkPermission(),!z())throw f(q,"Need access_token for api call, Please login first");if(!n||!Array.isArray(n)||n.length===0)throw f(k,"no proper argument");if(n.length>vi)throw f(k,"exceed the limit of num of messages");if(!(o=$().liffId))throw f(ne);window.liff&&(s=window.liff).analytics&&Pr(s.analytics),d.label=1;case 1:return d.trys.push([1,3,,4]),a=zs.getInstance(),u=re(),c={waitForSubwindowResult:!0},_()&&u&&te(u,"10.11.0")<0&&(c.waitForSubwindowResult=!1),[4,a.init({messages:n,isMultiple:i,referrer:{liffId:o,url:location.origin},options:c})];case 2:return[2,d.sent()];case 3:throw(l=d.sent())instanceof Pn?l:f(ht,l.message);case 4:return[2]}})})},this.checkPermission=function(){if(be())throw f(J,"The operation is not allowed in the SubWindow");var n=((G()||{}).availability||{}).shareTargetPicker||{},r=n.permission,i=n.minVer;if(!r)throw _()?f(J,"Need LINE App "+i+" at least or consent on shareTargetPicker usage on LINE developer site"):f(J,"Need consent on shareTargetPicker usage on LINE developer site")}}return e.prototype.install=function(){return this.shareTargetPicker},e}(),Gs=new Nr,Ks=Object.freeze(Object.defineProperty({__proto__:null,ShareTargetPickerModule:Nr,module:Gs},Symbol.toStringTag,{value:"Module"})),Js=T(Ks);(function(e,t){(function(n,r){e.exports=r()})(window,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=n,i.c=r,i.d=function(o,s,a){i.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:a})},i.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,s){if(1&s&&(o=i(o)),8&s||4&s&&typeof o=="object"&&o&&o.__esModule)return o;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var u in o)i.d(a,u,function(c){return o[c]}.bind(null,u));return a},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="https://static.line-scdn.net/liff/edge/2/",i(i.s=0)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.liff=void 0,i(1),i(2);var o=i(3).default;r.liff=o,r.default=o},function(n,r){n.exports=ii},function(n,r){n.exports=li},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),s=i(5),a=i(6),u=i(7),c=i(8),l=i(9),d=i(10),g=i(11),v=i(12),m=i(13),w=i(14),b=i(15),O=i(16),E=i(17),K=i(18),le=i(19),Z=i(20),ee=i(21),fe=i(22),ie=i(23),rt=i(24),Ne=i(25),Re=i(26),Ue=i(27),De=i(28),Rr=i(29),Be=Object.defineProperties({},{getOS:{value:l.getOS,enumerable:!0,writable:!0},getVersion:{value:d.getVersion,enumerable:!0,writable:!0},getLanguage:{value:g.getLanguage,enumerable:!0,writable:!0},isInClient:{value:u.isInClient,enumerable:!0,writable:!0},isLoggedIn:{value:m.isLoggedIn,enumerable:!0,writable:!0},logout:{value:w.logout,enumerable:!0,writable:!0},getAccessToken:{value:a.getAccessToken,enumerable:!0,writable:!0},getIDToken:{value:a.getIDToken,enumerable:!0,writable:!0},getDecodedIDToken:{value:a.getDecodedIDToken,enumerable:!0,writable:!0},getContext:{value:a.getContext,enumerable:!0,writable:!0},openWindow:{value:K.openWindow,enumerable:!0,writable:!0},closeWindow:{value:le.closeWindow,enumerable:!0,writable:!0},getFriendship:{value:De.attachChecker(ee.getFriendship,"profile"),enumerable:!0,writable:!0},getAId:{value:a.getAId,enumerable:!0,writable:!0},getProfilePlus:{value:a.getProfilePlus,enumerable:!0,writable:!0},getIsVideoAutoPlay:{value:a.getIsVideoAutoPlay,enumerable:!0,writable:!0},getLineVersion:{value:O.getLineVersion,enumerable:!0,writable:!0},isApiAvailable:{value:E.isApiAvailable,enumerable:!0,writable:!0},getProfile:{value:De.attachChecker(v.getProfile,"profile"),enumerable:!0,writable:!0},sendMessages:{value:De.attachChecker(Z.sendMessages,"chat_message.write"),enumerable:!0,writable:!0},subWindow:{value:fe.subWindow,enumerable:!0,writable:!0},ready:{value:c.ready,enumerable:!0,writable:!0},id:{get:function(){return a.getConfig().liffId||null},enumerable:!0},_dispatchEvent:{value:b.dispatch,enumerable:!0,writable:!0},_call:{value:b.call,enumerable:!0,writable:!0},_addListener:{value:b.addListener,enumerable:!0,writable:!0},_removeListener:{value:b.removeListener,enumerable:!0,writable:!0},_postMessage:{value:b.postMessage,enumerable:!0,writable:!0}}),We=new ie.ModuleDriverImpl,Ur=new ie.ModuleContextImpl(We,Be),Dr=new ie.UseModule(We,Ur,{namespacePrefix:""}).install(),Br=new ie.LiffPluginContextImpl(We,Be);[new ie.UseModule(We,Br),new s.LoginModule,new o.InitModule,new rt.AnalyticsModule,Ue.module,Ne.module,Re.module,De.module,Rr.module].forEach(function(Wr){Dr.call(Be,Wr)}),r.default=Be},function(n,r){n.exports=Fo},function(n,r){n.exports=Do},function(n,r){n.exports=Bo},function(n,r){n.exports=Wo},function(n,r){n.exports=qo},function(n,r){n.exports=Ho},function(n,r){n.exports=Vo},function(n,r){n.exports=Ko},function(n,r){n.exports=Xo},function(n,r){n.exports=Qo},function(n,r){n.exports=Yo},function(n,r){n.exports=Zo},function(n,r){n.exports=es},function(n,r){n.exports=ts},function(n,r){n.exports=os},function(n,r){n.exports=ss},function(n,r){n.exports=ls},function(n,r){n.exports=hs},function(n,r){n.exports=ps},function(n,r){n.exports=ys},function(n,r){n.exports=Es},function(n,r){n.exports=xs},function(n,r){n.exports=As},function(n,r){n.exports=Fs},function(n,r){n.exports=Ws},function(n,r){n.exports=Js}]).default})})(vn);var he=Vr(vn.exports);he.init({liffId:"1657236278-90NKVoX8"}).then(()=>{if(he.isLoggedIn()||he.login(),he.isLoggedIn()){const e=he.getDecodedIDToken();console.log(e),he.getProfile().then(t=>{console.log("profile",t)}).catch(t=>{console.log("error",t)}),console.log("iii"),he.sendMessages([{type:"text",text:"Hello, World!"}]).then(()=>{console.log("message sent")}).catch(t=>{console.log("error",t)})}document.querySelector("#app").innerHTML=`
    <h1>create-liff-app</h1>
    <p>LIFF init succeeded.</p>
    <a href="https://developers.line.biz/ja/docs/liff/" target="_blank" rel="noreferrer">
      LIFF Documentation
    </a>
  `}).catch(e=>{document.querySelector("#app").innerHTML=`
    <h1>create-liff-app</h1>
    <p>LIFF init failed.</p>
    <p><code>${e}</code></p>
    <a href="https://developers.line.biz/ja/docs/liff/" target="_blank" rel="noreferrer">
      LIFF Documentation
    </a>
  `});
